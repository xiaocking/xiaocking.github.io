(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{579:function(_,v,e){"use strict";e.r(v);var t=e(2),o=Object(t.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"z-index和栈空间"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#z-index和栈空间"}},[_._v("#")]),_._v(" z-index和栈空间")]),_._v(" "),v("p",[v("em",[_._v("本节内容，将深入研究z-index这个属性和栈空间（stacking context）。")])]),_._v(" "),v("h2",{attrs:{id:"一-z-index"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一-z-index"}},[_._v("#")]),_._v(" 一.z-index")]),_._v(" "),v("p",[v("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/z-index",target:"_blank",rel:"noopener noreferrer"}},[_._v("MDN"),v("OutboundLink")],1),_._v("上是这样描述z-index的：")]),_._v(" "),v("blockquote",[v("p",[v("code",[_._v("z-index")]),_._v("属性设定了一个定位元素及其后代元素或flex项目的z-order。 当元素之间重叠的时候，"),v("code",[_._v("z-index")]),_._v("较大的元素会覆盖较小的元素在上层进行显示。")])]),_._v(" "),v("p",[_._v("MDN中还提到了下面两点内容，作为补充。")]),_._v(" "),v("blockquote",[v("p",[_._v("1.盒子在当前堆叠上下文中的堆叠层级。")]),_._v(" "),v("p",[_._v("2.盒子是否创建一个本地堆叠上下文。")])]),_._v(" "),v("p",[_._v("如果你足够细心，应该能够注意到"),v("strong",[_._v("堆叠上下文")]),_._v("这个词。本着好好学习天天向上的精神，我们来个追查到底。")]),_._v(" "),v("p",[_._v("先来看一个例子。\n"),v("iframe",{staticStyle:{width:"100%"},attrs:{height:"300",scrolling:"no",title:"z-index  and stacking context_01",src:"https://codepen.io/AhCola/embed/WNjVEBm?default-tab=html%2Cresult",frameborder:"no",loading:"lazy",allowtransparency:"true",allowfullscreen:"true"}},[_._v("\nSee the Pen "),v("a",{attrs:{href:"https://codepen.io/AhCola/pen/WNjVEBm"}},[_._v("\nz-index  and stacking context_01")]),_._v(" by Pengfei Wang ("),v("a",{attrs:{href:"https://codepen.io/AhCola"}},[_._v("@AhCola")]),_._v(")\non "),v("a",{attrs:{href:"https://codepen.io"}},[_._v("CodePen")]),_._v(".\n")])]),_._v(" "),v("p",[_._v("为什么"),v("code",[_._v("z-index")]),_._v("设置为"),v("code",[_._v("-1")]),_._v("，但是它还是在最上面显示呢？")]),_._v(" "),v("p",[_._v("其实罪魁祸首就是"),v("strong",[_._v("堆叠上下文")]),_._v("。")]),_._v(" "),v("h2",{attrs:{id:"二-栈空间"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二-栈空间"}},[_._v("#")]),_._v(" 二.栈空间")]),_._v(" "),v("p",[v("strong",[_._v("栈空间（stacking context），也称堆叠上下文")]),_._v("。"),v("a",{attrs:{href:"https://www.w3.org/TR/2012/WD-css3-positioning-20120207/#det-stacking-context",target:"_blank",rel:"noopener noreferrer"}},[_._v("w3c"),v("OutboundLink")],1),_._v("中有详细介绍，我在这里就扮演一个搬运工的角色，将这部分内容搬出来。")]),_._v(" "),v("p",[_._v("在css（html）的世界中，所有的元素都是处于三维世界中的，对的是三维的，它们不仅仅只有x和y坐标，还有一个z坐标，在图形学中z坐标也叫做深度。你可以认为这个css的坐标系的x正轴方向是从左到右，y正轴方向是从上到下，z轴方向是从屏幕里指向屏幕外的。")]),_._v(" "),v("p",[_._v("每个元素box都属于一个栈空间，这些元素box在栈空间内都有一个整数的"),v("strong",[_._v("栈层级")]),_._v("，元素的"),v("strong",[_._v("栈层级")]),_._v("可以用"),v("code",[_._v("z-index")]),_._v("，默认"),v("strong",[_._v("栈层级")]),_._v("为0，同一个栈空间内，栈层级大的元素永远在栈层级小的元素的前面，栈层级大表示其z坐标大，越靠近屏幕外面，离人眼越近，所以一般我们可以通过设置"),v("code",[_._v("z-index")]),_._v("使某个元素显示在其他元素的上面。")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/pengfeiw/PengfeiBlog@1.0.0/image/130.jpg",alt:"stacking context"}})]),_._v(" "),v("h3",{attrs:{id:"栈空间的创建"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#栈空间的创建"}},[_._v("#")]),_._v(" 栈空间的创建")]),_._v(" "),v("p",[_._v("根元素会创建一个"),v("strong",[_._v("根栈空间（root stacking context）")]),_._v("，根栈空间内的元素有可能会创建一个"),v("strong",[_._v("局部的栈空间")]),_._v("，然后局部栈空间内的元素可能又会创建一个"),v("strong",[_._v("局部栈空间内的局部栈空间")]),_._v("...")]),_._v(" "),v("p",[_._v("创建局部栈空间的元素有两个栈层级：一个是它在它所属的栈空间中的栈层级（栈层级由它的z-index设置），另一个是它在自己所创建的局部栈空间内的栈层级（栈层级为0）。")]),_._v(" "),v("p",[_._v("子元素的栈层级与它的父元素的栈层级相等，除非设置它的"),v("strong",[_._v("z-index")]),_._v("属性为一个不同的值。")]),_._v(" "),v("h4",{attrs:{id:"_1-position属性"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-position属性"}},[_._v("#")]),_._v(" 1.position属性")]),_._v(" "),v("p",[_._v("如果设置了一个元素的position属性，那么该元素有可能会创建一个局部栈空间。具体由该元素的z-index属性确定。")]),_._v(" "),v("p",[v("code",[_._v("z-index")]),_._v("有两个作用：")]),_._v(" "),v("ol",[v("li",[_._v("设置元素在所属栈空间内的栈层级。")]),_._v(" "),v("li",[_._v("决定元素是否创建了一个局部栈空间。")])]),_._v(" "),v("p",[v("code",[_._v("z-index")]),_._v("接受两种值：关键字"),v("code",[_._v("auto")]),_._v("、整数。")]),_._v(" "),v("ol",[v("li",[v("code",[_._v("z-index:auto;")]),_._v(": 元素在所属栈空间内的栈层级为0，元素不会创建新的栈空间（局部栈空间），除非该元素是页面根元素，页面根元素默认会创建一个栈空间。")]),_._v(" "),v("li",[v("code",[_._v("z-index:<interger>")]),_._v(": 元素在所属栈空间内的栈层级为0，设置的"),v("code",[_._v("<interger>")]),_._v("，元素会创建一个新的局部栈空间。")])]),_._v(" "),v("p",[_._v("所以前面那个例子，我们设置了"),v("code",[_._v("z-index:-1;")]),_._v("没有效果，因为"),v("code",[_._v("<span>")]),_._v("元素处于新的局部栈空间内。而它的父元素在外层栈空间内的栈层级为0。")]),_._v(" "),v("h4",{attrs:{id:"_2-其他"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-其他"}},[_._v("#")]),_._v(" 2.其他")]),_._v(" "),v("p",[_._v("还有许多其他情况也可以创建新的栈空间，这里我做一个总结。")]),_._v(" "),v("ul",[v("li",[_._v("文档根元素（html）。")]),_._v(" "),v("li",[v("code",[_._v("position")]),_._v("为"),v("code",[_._v("absolute")]),_._v("或"),v("code",[_._v("relative")]),_._v("的元素，并且"),v("code",[_._v("z-index")]),_._v("不为"),v("code",[_._v("auto")]),_._v("的元素。")]),_._v(" "),v("li",[v("code",[_._v("position")]),_._v("为"),v("code",[_._v("fixed")]),_._v("或者"),v("code",[_._v("sticky")]),_._v("的元素。")]),_._v(" "),v("li",[_._v("flex容器的子元素（项目），且"),v("code",[_._v("z-index")]),_._v("值不为"),v("code",[_._v("auto")]),_._v("。")]),_._v(" "),v("li",[_._v("grid容器的子元素（项目），且"),v("code",[_._v("z-index")]),_._v("值不为"),v("code",[_._v("auto")]),_._v("。")]),_._v(" "),v("li",[v("code",[_._v("opacity")]),_._v("属性值小于"),v("code",[_._v("1")]),_._v("的元素")]),_._v(" "),v("li",[v("code",[_._v("mix-blend-mode")]),_._v("属性值不为"),v("code",[_._v("normal")]),_._v("的元素；")]),_._v(" "),v("li",[_._v("以下任意属性值不为 none 的元素：\n"),v("ul",[v("li",[v("code",[_._v("transform")])]),_._v(" "),v("li",[v("code",[_._v("filter")])]),_._v(" "),v("li",[v("code",[_._v("perspective")])]),_._v(" "),v("li",[v("code",[_._v("clip-path")])]),_._v(" "),v("li",[v("code",[_._v("mask")]),_._v("/"),v("code",[_._v("mask-image")]),_._v("/"),v("code",[_._v("mask-border")])])])]),_._v(" "),v("li",[v("code",[_._v("isolation")]),_._v("属性值为"),v("code",[_._v("isolate")]),_._v("的元素。")]),_._v(" "),v("li",[v("code",[_._v("-webkit-overflow-scrolling")]),_._v("属性值为"),v("code",[_._v("touch")]),_._v("的元素。")])]),_._v(" "),v("h2",{attrs:{id:"三-绘制顺序"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三-绘制顺序"}},[_._v("#")]),_._v(" 三.绘制顺序")]),_._v(" "),v("p",[_._v("元素的绘制顺序，影响了当两个元素重叠时，其中一个元素是否会被另一个元素遮住。")]),_._v(" "),v("p",[_._v("在一个栈空间内，绘制顺序从先往后大致如下。")]),_._v(" "),v("ol",[v("li",[_._v("构成该栈空间元素的背景和边框（先绘制背景，再绘制边框）。")]),_._v(" "),v("li",[v("code",[_._v("z-index")]),_._v("为负值的并且创建了局部栈空间的元素，"),v("code",[_._v("z-index")]),_._v("最小的先绘制。")]),_._v(" "),v("li",[_._v("处在正常文档流内，position为static的非内联（non-inline）元素。")]),_._v(" "),v("li",[_._v("position为static的浮动元素。")]),_._v(" "),v("li",[_._v("处在正常文档流内，position为static的内联（inline）元素，包括内联table和内联块（inline blocks）。")]),_._v(" "),v("li",[v("code",[_._v("z-index")]),_._v("为0的并且创建了局部栈空间的元素和"),v("code",[_._v("z-index")]),_._v("为0并且position为非static的元素。")]),_._v(" "),v("li",[v("code",[_._v("z-index")]),_._v("为正值的并且创建了局部栈空间的元素，"),v("code",[_._v("z-index")]),_._v("最小的先绘制。")])]),_._v(" "),v("p",[_._v("更详细的绘制顺序可以参考"),v("a",{attrs:{href:"https://www.w3.org/TR/2012/WD-css3-positioning-20120207/#det-stacking-context",target:"_blank",rel:"noopener noreferrer"}},[_._v("这里"),v("OutboundLink")],1),_._v("。")]),_._v(" "),v("p",[_._v("（完）")])])}),[],!1,null,null,null);v.default=o.exports}}]);