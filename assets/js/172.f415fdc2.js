(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{679:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"linux-设置-root-权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-设置-root-权限"}},[t._v("#")]),t._v(" Linux 设置 root 权限")]),t._v(" "),a("blockquote",[a("p",[t._v("常用于给 持续集成框架生成的服务器用户 设置权限")])]),t._v(" "),a("h2",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[t._v("系统：CentOS Linux release 7.5.1804 (Core)\n用户：gitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner\n")])])]),a("h2",{attrs:{id:"一、将用户添加到root组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、将用户添加到root组"}},[t._v("#")]),t._v(" 一、将用户添加到root组")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改配置文件")]),t._v("\nvim /etc/sudoers\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 找到下面这句 并去掉 # 号")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token directive important"}},[t._v("%wheel  ALL=(ALL)  ALL")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 然后修改用户，使其属于root组（wheel），命令如下：")]),t._v("\nusermod "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("g root gitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改完毕，保存退出。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用命令 su - gitlab-runner 登录，即可获得root权限进行操作。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 遇到提示无权限操作时 加 sudo 执行即可")]),t._v("\n")])])]),a("h2",{attrs:{id:"二、直接配置用户权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、直接配置用户权限"}},[t._v("#")]),t._v(" 二、直接配置用户权限")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改配置文件")]),t._v("\nvim /etc/sudoers\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Allow root to run any commands anywhere")]),t._v("\nroot    ALL=(ALL)     ALL\ngitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner   ALL=(ALL)     ALL "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加这句")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存退出")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换用户查看")]),t._v("\nsu "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" gitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 遇到提示无权限操作时 加 sudo 执行即可")]),t._v("\n")])])]),a("h2",{attrs:{id:"三、修改用户id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、修改用户id"}},[t._v("#")]),t._v(" 三、修改用户id")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改配置文件")]),t._v("\nvim /etc/sudoers\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 找到这行")]),t._v("\ngitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("500"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("500"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("gitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/home/gitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/bin/bash\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改为")]),t._v("\ngitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("500"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("gitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/home/gitlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/bin/bash\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存，用 gitlab-runner 账户登录后，直接获取的就是root帐号的权限")]),t._v("\n")])])]),a("h2",{attrs:{id:"友情提醒"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#友情提醒"}},[t._v("#")]),t._v(" 友情提醒")]),t._v(" "),a("blockquote",[a("p",[t._v("虽然方法三看上去简单方便，但一般不推荐使用，推荐使用方法二")])])])}),[],!1,null,null,null);a.default=e.exports}}]);