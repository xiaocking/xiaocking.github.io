(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{701:function(n,t,e){"use strict";e.r(t);var r=e(2),a=Object(r.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"jenkins-安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装配置"}},[n._v("#")]),n._v(" jenkins 安装配置")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v("centOs7下 git+github+nginx+nodeJs+vue\n实现前端项目自动化部署\n")])])]),t("h2",{attrs:{id:"安装-jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-jdk"}},[n._v("#")]),n._v(" 安装 jdk")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://www.liquidweb.com/kb/install-java-8-on-centos-7/",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考文章"),t("OutboundLink")],1),n._v(" "),t("a",{attrs:{href:"https://juejin.im/post/5c81353cf265da2dd94cd7b0",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考文章"),t("OutboundLink")],1),t("br"),n._v("\n(yum update 看个人情况执行)\nyum install java-1.8.0-openjdk")]),n._v(" "),t("h2",{attrs:{id:"安装-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx"}},[n._v("#")]),n._v(" 安装 nginx")]),n._v(" "),t("ol",[t("li",[n._v("安装 nginx 相关依赖环境"),t("br"),n._v("\nyum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel")]),n._v(" "),t("li",[n._v("安装 nginx"),t("br"),n._v("\n安装已下载的 nginx 包（tar -zxvf nginx-1.14.0.tar.gz）"),t("br"),n._v("\ntar -zxvf nginx-1.14.0.tar.gz")]),n._v(" "),t("li",[n._v("编译安装")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("  ./configure\n  make\n  make install\n\n  以上操作后Nginx将被安装在/usr/local/nginx目录下\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[n._v("nginx 相关操作"),t("br"),n._v(" "),t("a",{attrs:{href:"https://blog.51cto.com/13721885/2136360",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考文章"),t("OutboundLink")],1),n._v(" "),t("a",{attrs:{href:"https://www.cnblogs.com/ay-a/p/11828739.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考文章"),t("OutboundLink")],1)]),n._v(" "),t("p",[n._v("进入 /usr/local/nginx/sbin")])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("  ./nginx   启动Nginx\n  ./nginx -s stop   立即停止Nginx并退出\n  ./nginx -s quit   优雅停止Nginx并退出\n  ./nginx -s reload 重启nginx\n")])])]),t("h2",{attrs:{id:"安装配置-jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装配置-jenkins"}},[n._v("#")]),n._v(" 安装配置 jenkins")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/fangts/p/11095316.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考文章"),t("OutboundLink")],1),n._v(" "),t("a",{attrs:{href:"https://blog.csdn.net/yexiaomodemo/article/details/98874341",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考文章"),t("OutboundLink")],1),n._v(" "),t("a",{attrs:{href:"https://pkg.jenkins.io/redhat/",target:"_blank",rel:"noopener noreferrer"}},[n._v("jenkins 安装包下载"),t("OutboundLink")],1)]),n._v(" "),t("ol",[t("li",[t("p",[n._v("安装插件"),t("br"),n._v("\n如果下载慢 修改 /var/lib/jenkins/hudson.model.UpdateCenter.xml 文件中的地址为国内镜像，地址:")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json\n\nhttp://mirror.esuni.jp/jenkins/updates/update-center.json\n")])])])])]),n._v(" "),t("h3",{attrs:{id:"配置-jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-jenkins"}},[n._v("#")]),n._v(" 配置 jenkins")]),n._v(" "),t("ul",[t("li",[t("p",[n._v("github 配置"),t("br"),n._v(" "),t("a",{attrs:{href:"https://blog.csdn.net/qq_21768483/article/details/80177920",target:"_blank",rel:"noopener noreferrer"}},[n._v("githubhook 配置"),t("OutboundLink")],1)])]),n._v(" "),t("li",[t("p",[n._v("Publish Over SSH 配置"),t("br"),n._v(" "),t("a",{attrs:{href:"https://blog.51cto.com/xiong51/2091739",target:"_blank",rel:"noopener noreferrer"}},[n._v("Publish Over SSH 配置"),t("OutboundLink")],1),t("br"),n._v("\n安装提示配置即可（注意 Hostname 不要带 http/https）")])]),n._v(" "),t("li",[t("p",[n._v("nodeJs 安装"),t("br"),n._v("\n本次直接在 jenkins 中安装（先安装 nodeJs 插件），在全局工具配置中选择对应版本，勾选自动安装即可")])]),n._v(" "),t("li",[t("p",[n._v("git 配置"),t("br"),n._v("\n如果服务器有安装可以不用勾选自动安装，全局工具配置中配置对应 git 路径即可（whereis git 带 bin 目录的），如果没有安装可以勾选自动安装")])])]),n._v(" "),t("h3",{attrs:{id:"jenkins-项目配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-项目配置"}},[n._v("#")]),n._v(" jenkins 项目配置")]),n._v(" "),t("ol",[t("li",[t("p",[n._v("新建一个任务（按个人所需），本次选择自由风格、名称 vueDemo")])]),n._v(" "),t("li",[t("p",[n._v("进入项目面板 选择配置 对项目任务进行配置")])]),n._v(" "),t("li",[t("p",[n._v("general 本次选择 github 项目 将项目地址复制过来即可（github 对应项目地址栏 不带.git 后缀的）")])]),n._v(" "),t("li",[t("p",[n._v("源码管理 本次选 git"),t("br"),n._v("\n将 github 仓库路径复制过来即可（带.git 后缀的）"),t("br"),n._v("\nCredentials 添加 github 账号及密码 填写一个描述作为标识"),t("br"),n._v("\n源码库浏览器 选 githubweb url 填 github 项目地址栏路径")])]),n._v(" "),t("li",[t("p",[n._v("构建触发器 选 GitHub hook trigger for GITScm polling")])]),n._v(" "),t("li",[t("p",[n._v("构建环境 选 secret text 变量名随意 凭据 github 配置步骤中生成的那个\n还需勾选 Provide Node & npm bin/ folder to PATH 选择对应 node（默认选中的即可）")])]),n._v(" "),t("li",[t("p",[n._v("构建 选执行 shell（看个人所需）")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("  本次所用：\n  echo $PATH\n  node -v\n  npm -v\n  npm install\n  npm run build\n  rm -rf vueDemoWeb\n  mv dist vueDemoWeb\n")])])])]),n._v(" "),t("li",[t("p",[n._v("构建后执行 本次选 send build artifacts over ssh"),t("br"),n._v("\n看个人情况\nRemove prefix 本次为 dist/"),t("br"),n._v("\nRemote directory 为 /"),t("br"),n._v("\nExec command:")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("rm -rf /usr/local/nginx/html/vueDemoWeb\n\\cp -rf /var/lib/jenkins/workspace/vueDemo/vueDemoWeb /usr/local/nginx/html/\n")])])])])]),n._v(" "),t("h2",{attrs:{id:"后语"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后语"}},[n._v("#")]),n._v(" 后语")]),n._v(" "),t("p",[n._v("到这 jenkins 基本已配置完成了，如果前面配置没出问题的话，打包后的文件已经可以放到 nginx 服务器上。只需在配置一下 nginx 就可以说实现通过：")]),n._v(" "),t("p",[n._v("git 上传代码到 github 仓库"),t("br"),n._v("\n触发 github webhook 事件"),t("br"),n._v("\n执行 jenkins 构建操作"),t("br"),n._v("\n构建成功后，将文件复制到 nginx 服务下"),t("br"),n._v("\n从而实现项目的持续发布、构建、部署；")]),n._v(" "),t("h2",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[n._v("#")]),n._v(" 常见问题")]),n._v(" "),t("h3",{attrs:{id:"jenkins-npm-install-慢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-npm-install-慢"}},[n._v("#")]),n._v(" jenkins npm install 慢")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("查看当前镜像源\nnpm get registry\n\n切换镜像源 为淘宝镜像（国内）\nnpm config set registry https://registry.npmmirror.com\n")])])]),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[n._v("#")]),n._v(" 参考文章")]),n._v(" "),t("p",[t("a",{attrs:{href:"https://blog.51cto.com/techsnail/2142599",target:"_blank",rel:"noopener noreferrer"}},[n._v("SVN 怎么触发 Jenkins 自动构建"),t("OutboundLink")],1)]),n._v(" "),t("p",[t("a",{attrs:{href:"https://ken.io/note/centos7-gitlab-install-tutorial",target:"_blank",rel:"noopener noreferrer"}},[n._v("CentOS 7 下 GitLab 安装部署教程"),t("OutboundLink")],1)]),n._v(" "),t("p",[t("a",{attrs:{href:"https://about.gitlab.com/install/#centos-7",target:"_blank",rel:"noopener noreferrer"}},[n._v("gitlab"),t("OutboundLink")],1)]),n._v(" "),t("p",[t("a",{attrs:{href:"https://www.dgstack.cn/archives/3205.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("Jenkins 自动化构建 – 前端 VUE 项目"),t("OutboundLink")],1)]),n._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/qq_21768483/article/details/80177920",target:"_blank",rel:"noopener noreferrer"}},[n._v("jenkins github webhook 配置"),t("OutboundLink")],1)]),n._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/aaaaaab_/article/details/82012044",target:"_blank",rel:"noopener noreferrer"}},[n._v("jenkins gitlab 配置"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=a.exports}}]);