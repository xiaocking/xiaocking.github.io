(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{685:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"mongo-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongo-常用命令"}},[t._v("#")]),t._v(" mongo 常用命令")]),t._v(" "),s("h2",{attrs:{id:"启动、关闭"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动、关闭"}},[t._v("#")]),t._v(" 启动、关闭")]),t._v(" "),s("p",[t._v("1、命令启动")]),t._v(" "),s("blockquote",[s("p",[t._v("mongod --dbpath=/usr/local/mongodb/db --bind_ip=0.0.0.0")])]),t._v(" "),s("p",[t._v("2、配置文件启动")]),t._v(" "),s("p",[t._v("可以将命令行参数写入配置文件，然后通过配置文件的方式启动\n这里在修改 mongodb 目录下的 "),s("code",[t._v("mongodb.conf")]),t._v(" ，文件内容如下：")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[t._v("port=27017\ndbpath= /usr/local/mongodb/db             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据库文件存放目录(路径填写自己的)")]),t._v("\nlogpath= /usr/local/mongodb/mongodb.log   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志文件(路径填写自己的)")]),t._v("\nlogappend=true                            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 追加方式添加日志")]),t._v("\nfork=true                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不在后台运行 true为后台运行")]),t._v("\nmaxConns=100                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最大连接数")]),t._v("\nnoauth=true                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不启用验证")]),t._v("\njournal=true                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 每次写入时记录一条操作日志")]),t._v("\nstorageEngine=wiredTiger                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 存储引擎")]),t._v("\nbind_ip = 0.0.0.0                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 允许所有id连接（允许外部访问）")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("配置说明")]),t._v(" "),s("p",[t._v("--dbpath \t\t\t\t\t指定数据库的目录。\n--port \t\t\t\t\t\t指定数据库端口，模式是27017。\n--bind_ip \t\t\t\t绑定IP。\n--derectoryperdb\t为每个db创建一个独立子目录。\n--logpath \t\t\t\t指定日志存放目录。\n--logappend \t\t\t指定日志生成方式（追加/覆盖）。\n--pidfilepath \t\t指定进程文件路径，如果不指定，将不产生进程文件。\n--keyFile \t\t\t\t集群模式的关键标识\n--journal \t\t\t\t启用日志\n--nssize \t\t\t\t\t指定.ns文件的大小，单位MB，默认是16M，最大2GB。\n--maxConns \t\t\t\t最大的并发连接数。\n--notablescan \t\t不允许进行表扫描\n--noprealloc \t\t\t关闭数据文件的预分配功能\n--fork \t\t\t\t\t\t以后台Daemon形式运行服务")]),t._v(" "),s("p",[t._v("更多的选项利用 mongod --help 进行查看")])]),s("p",[t._v("然后，通过命令启动")]),t._v(" "),s("blockquote",[s("p",[t._v("/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf")])]),t._v(" "),s("p",[t._v("关闭数据库")]),t._v(" "),s("blockquote",[s("p",[t._v("/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf --shutdown")])]),t._v(" "),s("h2",{attrs:{id:"连接数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#连接数据库"}},[t._v("#")]),t._v(" 连接数据库")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 连接本机")]),t._v("\nmongo       \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mongoDB 启动端口不为 27017时，mongo 命令需指定连接的端口")]),t._v("\nmongo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("port 25015\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 连接远程服务")]),t._v("\nmongo ip   \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用特定账号密码连接验证指定数据库")]),t._v("\nmongo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("u adminUser "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p adminPassword "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("authenticationDatabase admin\n")])])]),s("h2",{attrs:{id:"数据库相关操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库相关操作"}},[t._v("#")]),t._v(" 数据库相关操作")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询所有数据库")]),t._v("\nshow dbs\nshow databases\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建数据库")]),t._v("\nuse dbName\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除数据库")]),t._v("\ndb.dropDatabase()\n")])])]),s("h2",{attrs:{id:"表相关操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表相关操作"}},[t._v("#")]),t._v(" 表相关操作")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有表")]),t._v("\nshow tables;\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 插入表数据")]),t._v("\ndb.<tableName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(".insert();\n如：db.members.insert("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Michael"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(");\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询表数据")]),t._v("\ndb.<tableName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(".find();\ndb.<tablename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v('.find("key"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v('"value") \t\t\t'),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回所有符合的结果")]),t._v("\ndb.<tablename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v('.findOne("key"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v('"value")  \t'),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回符合结果的第一个")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改表数据 如：")]),t._v("\ndb.xx.update("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Michael"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$set"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(");\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除表中的数据 如：")]),t._v("\ndb.xx.remove("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Michael"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(");\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除表全部数据：")]),t._v("\ndb.xx.remove("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(");\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除表")]),t._v("\ndb.xx.drop();\n")])])]),s("h2",{attrs:{id:"用户角色相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户角色相关"}},[t._v("#")]),t._v(" 用户角色相关")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询当前数据库中的角色权限")]),t._v("\ndb.runCommand("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"rolesInfo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<rolename>"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询其它数据库中指定的角色权限")]),t._v("\ndb.runCommand("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("'rolesInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("role")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<rolename>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("db")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<database>"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询所有角色权限(仅用户自定义角色)")]),t._v("\ndb.runCommand("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("'rolesInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询所有角色权限(包含内置角色)")]),t._v("\ndb.runCommand("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("'rolesInfo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("showBuiltinRoles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建用户")]),t._v("\ndb.createUser("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pwd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("roles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("role")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dbAdmin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("db")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改用户")]),t._v('\ndb.updateUser("user"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("customData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xx"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("roles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("role")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("db")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改用户密码")]),t._v('\ndb.changeUserPassword("user"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(' "new password")\n\n'),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除用户")]),t._v('\ndb.dropUser("user")\n\n'),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 判断用户是否有访问权限")]),t._v("\ndb.auth('username'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("'pwd')\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改用户权限（修改roles数组）")]),t._v('\ndb.updateUser("username"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" roles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"readWriteAnyDatabase"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建管理员用户（具有所有数据库访问权限）")]),t._v("\ndb.createUser("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adminUser"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pwd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adminPassword"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("roles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userAdminAnyDatabase"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dbAdminAnyDatabase"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建超级管理员用户（具有所有数据库操作访问权限）")]),t._v("\ndb.createUser("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'adminUser'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pwd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'adminPassword'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("roles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n")])])]),s("h2",{attrs:{id:"mongodb中的主要角色"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb中的主要角色"}},[t._v("#")]),t._v(" MongoDB中的主要角色")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("数据库用户角色")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("read")]),t._v("：允许用户读取指定数据库。")]),t._v(" "),s("li",[s("code",[t._v("readWrite")]),t._v("：允许用户读写指定数据库。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("数据库管理角色")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("dbAdmin")]),t._v("：允许用户在指定数据库中执行管理函数，如索引创建、删除、查看统计或访问"),s("code",[t._v("system.profile")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("dbOwner")]),t._v("：这是"),s("code",[t._v("dbAdmin")]),t._v("、"),s("code",[t._v("readWrite")]),t._v("角色的组合，以及具有"),s("code",[t._v("dropDatabase")]),t._v("权限的额外角色。即，"),s("code",[t._v("dbOwner")]),t._v("包含了"),s("code",[t._v("read")]),t._v("、"),s("code",[t._v("readWrite")]),t._v("、"),s("code",[t._v("dbAdmin")]),t._v("和"),s("code",[t._v("userAdmin")]),t._v("的所有权限。")]),t._v(" "),s("li",[s("code",[t._v("userAdmin")]),t._v("：允许用户向"),s("code",[t._v("system.users")]),t._v("集合写入，可以在指定数据库中管理用户和角色。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("集群管理角色")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("clusterAdmin")]),t._v("：超级管理员角色，结合了"),s("code",[t._v("readWriteAnyDatabase")]),t._v("、"),s("code",[t._v("dbAdminAnyDatabase")]),t._v("、"),s("code",[t._v("userAdminAnyDatabase")]),t._v("、"),s("code",[t._v("clusterManager")]),t._v("、"),s("code",[t._v("clusterMonitor")]),t._v("和"),s("code",[t._v("hostManager")]),t._v("角色。它还允许用户执行"),s("code",[t._v("dropDatabase")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("clusterManager")]),t._v("：允许用户在集群上管理和执行维护操作，如分片、复制集等。")]),t._v(" "),s("li",[s("code",[t._v("clusterMonitor")]),t._v("：允许用户监控集群的健康状态和性能。")]),t._v(" "),s("li",[s("code",[t._v("hostManager")]),t._v("：允许用户监控和管理MongoDB实例。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("备份恢复角色")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("backup")]),t._v("：允许用户从所有数据库备份数据。")]),t._v(" "),s("li",[s("code",[t._v("restore")]),t._v("：允许用户从备份中恢复数据到所有数据库。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("所有数据库角色")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("readAnyDatabase")]),t._v("：只在"),s("code",[t._v("admin")]),t._v("数据库中可用，赋予用户所有数据库的读权限。")]),t._v(" "),s("li",[s("code",[t._v("readWriteAnyDatabase")]),t._v("：只在"),s("code",[t._v("admin")]),t._v("数据库中可用，赋予用户所有数据库的读写权限。")]),t._v(" "),s("li",[s("code",[t._v("userAdminAnyDatabase")]),t._v("：只在"),s("code",[t._v("admin")]),t._v("数据库中可用，赋予用户所有数据库的"),s("code",[t._v("userAdmin")]),t._v("权限。")]),t._v(" "),s("li",[s("code",[t._v("dbAdminAnyDatabase")]),t._v("：只在"),s("code",[t._v("admin")]),t._v("数据库中可用，赋予用户所有数据库的"),s("code",[t._v("dbAdmin")]),t._v("权限。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("超级用户角色")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("root")]),t._v("：只在"),s("code",[t._v("admin")]),t._v("数据库中可用，超级账号，具有超级权限。这通常包含了"),s("code",[t._v("readWriteAnyDatabase")]),t._v("、"),s("code",[t._v("dbAdminAnyDatabase")]),t._v("、"),s("code",[t._v("userAdminAnyDatabase")]),t._v("和"),s("code",[t._v("clusterAdmin")]),t._v("的所有权限。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("内部角色")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("__system")]),t._v("：MongoDB内部使用的角色，普通用户不应使用。")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("请注意，MongoDB中的角色和权限可以灵活组合和配置，以满足不同的安全和管理需求。在分配角色和权限时，请务必仔细考虑，并确保只授予必要的权限。")])]),t._v(" "),s("h2",{attrs:{id:"基本的和常用的mongodb命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本的和常用的mongodb命令"}},[t._v("#")]),t._v(" 基本的和常用的MongoDB命令")]),t._v(" "),s("h3",{attrs:{id:"_1-数据库操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据库操作"}},[t._v("#")]),t._v(" 1. 数据库操作")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("查看所有数据库")]),t._v("："),s("code",[t._v("show dbs")]),t._v(" 或 "),s("code",[t._v("show databases")])]),t._v(" "),s("li",[s("strong",[t._v("切换/创建数据库")]),t._v("："),s("code",[t._v("use 数据库名")]),t._v("。如果数据库不存在，MongoDB会在插入数据时自动创建。")]),t._v(" "),s("li",[s("strong",[t._v("删除当前数据库")]),t._v("："),s("code",[t._v("db.dropDatabase()")])])]),t._v(" "),s("h3",{attrs:{id:"_2-集合操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-集合操作"}},[t._v("#")]),t._v(" 2. 集合操作")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("查看当前数据库中的集合")]),t._v("："),s("code",[t._v("show collections")])]),t._v(" "),s("li",[s("strong",[t._v("删除集合")]),t._v("："),s("code",[t._v("db.集合名.drop()")])])]),t._v(" "),s("h3",{attrs:{id:"_3-文档操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-文档操作"}},[t._v("#")]),t._v(" 3. 文档操作")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("插入文档")]),t._v("：\n"),s("ul",[s("li",[t._v("插入单个文档："),s("code",[t._v("db.集合名.insertOne({文档内容})")])]),t._v(" "),s("li",[t._v("插入多个文档："),s("code",[t._v("db.集合名.insertMany([多个文档])")])])])]),t._v(" "),s("li",[s("strong",[t._v("查询文档")]),t._v("：\n"),s("ul",[s("li",[t._v("查询所有文档："),s("code",[t._v("db.集合名.find()")])]),t._v(" "),s("li",[t._v("查询并格式化输出（pretty打印）："),s("code",[t._v("db.集合名.find().pretty()")])]),t._v(" "),s("li",[t._v("根据条件查询："),s("code",[t._v("db.集合名.find({字段名: 字段值})")])])])]),t._v(" "),s("li",[s("strong",[t._v("更新文档")]),t._v("：\n"),s("ul",[s("li",[t._v("更新单个文档："),s("code",[t._v("db.集合名.updateOne({查询条件}, {$set: {更新内容}})")])]),t._v(" "),s("li",[t._v("更新多个文档："),s("code",[t._v("db.集合名.updateMany({查询条件}, {$set: {更新内容}})")])])])]),t._v(" "),s("li",[s("strong",[t._v("删除文档")]),t._v("：\n"),s("ul",[s("li",[t._v("删除单个文档："),s("code",[t._v("db.集合名.deleteOne({查询条件})")])]),t._v(" "),s("li",[t._v("删除多个文档："),s("code",[t._v("db.集合名.deleteMany({查询条件})")])])])])]),t._v(" "),s("h3",{attrs:{id:"_4-索引操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-索引操作"}},[t._v("#")]),t._v(" 4. 索引操作")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("创建索引")]),t._v("："),s("code",[t._v("db.集合名.createIndex({字段名: 1})")]),t._v("，其中1表示升序，-1表示降序。")]),t._v(" "),s("li",[s("strong",[t._v("查看索引")]),t._v("："),s("code",[t._v("db.集合名.getIndexes()")])]),t._v(" "),s("li",[s("strong",[t._v("删除索引")]),t._v("："),s("code",[t._v('db.集合名.dropIndex("索引名")')]),t._v(" 或 "),s("code",[t._v("db.集合名.dropIndexes()")]),t._v("（删除所有索引）。")])]),t._v(" "),s("h3",{attrs:{id:"_5-其他常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-其他常用命令"}},[t._v("#")]),t._v(" 5. 其他常用命令")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("查看当前使用的数据库")]),t._v("："),s("code",[t._v("db")])]),t._v(" "),s("li",[s("strong",[t._v("查看数据库状态")]),t._v("："),s("code",[t._v("db.stats()")])]),t._v(" "),s("li",[s("strong",[t._v("获取帮助")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("help")]),t._v("：查看所有帮助命令")]),t._v(" "),s("li",[s("code",[t._v("db.help()")]),t._v("：查看数据库级别的帮助")]),t._v(" "),s("li",[s("code",[t._v("db.集合名.help()")]),t._v("：查看集合级别的帮助")]),t._v(" "),s("li",[s("code",[t._v("db.集合名.find().help()")]),t._v("：查看查询方法的帮助")])])])]),t._v(" "),s("h3",{attrs:{id:"注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),s("ul",[s("li",[t._v("MongoDB中的集合（collection）相当于关系型数据库中的表（table）。")]),t._v(" "),s("li",[t._v("MongoDB的文档（document）是由键值对（key-value pairs）组成的，其中键是字符串，值可以是多种数据类型（如字符串、数字、数组、文档等）。")]),t._v(" "),s("li",[t._v("MongoDB的索引可以提高查询性能，但也会占用存储空间并可能降低写操作的性能，因此需要谨慎使用。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);