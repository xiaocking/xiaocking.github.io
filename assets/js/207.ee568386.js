(window.webpackJsonp=window.webpackJsonp||[]).push([[207],{730:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),t("h2",{attrs:{id:"unsafe-perm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unsafe-perm"}},[s._v("#")]),s._v(" --unsafe-perm")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// npm 出于安全考虑不支持以 root 用户运行，即使你用 root 用户身份运行了，npm 会自动转成一个叫 nobody 的用户来运行，而这个用户几乎没有任何权限。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这样的话如果你脚本里有一些需要权限的操作，比如写文件（尤其是写 /root/.node-gyp），就会崩掉了。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 为了避免这种情况")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 要么按照 npm 的规矩来，专门建一个用于运行 npm 的高权限用户；")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 要么加 --unsafe-perm 参数，这样就不会切换到 nobody 上，运行时是哪个用户就是哪个用户，即使是 root。")]),s._v("\n")])])]),t("h2",{attrs:{id:"ios-右滑错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ios-右滑错误"}},[s._v("#")]),s._v(" IOS 右滑错误")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webApp IOS右滑错误")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// IOS右滑返回上一级是切换上一个WebView,Vue打包的App只有一个WebView,所以返回上一级是空白页")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须在 plusready 中执行")]),s._v("\n\ndocument"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plusready"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 禁止ios右滑返回(右滑显示空白页)")]),s._v("\n    plus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("webview"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentWebview")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setStyle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("popGesture")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"none"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h2",{attrs:{id:"node-sass-报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-sass-报错"}},[s._v("#")]),s._v(" node-sass 报错")]),s._v(" "),t("h3",{attrs:{id:"node-sass-安装过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-sass-安装过程"}},[s._v("#")]),s._v(" node-sass 安装过程")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\demo"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" npm i node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从npm源安装到node_modules")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" install "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\demo\\node_modules\\node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" node scripts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下载binding.node")]),s._v("\nDownloading binary from https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sass"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("releases"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("download"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("win32"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x64"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("64_binding"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("node\nDownload complete "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\nBinary saved to "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\demo\\node_modules\\node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\\vendor\\win32"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x64"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("\\binding"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("node\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 缓存binding.node")]),s._v("\nCaching binary to "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Users\\leepi\\AppData\\Roaming\\npm"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cache\\node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\\"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\\win32"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x64"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("64_binding"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("node\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" postinstall "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\demo\\node_modules\\node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" node scripts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n\nBinary found at "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\demo\\node_modules\\node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\\vendor\\win32"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x64"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("\\binding"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("node\nTesting binary\nBinary is fine\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 写package-lock.json")]),s._v("\nnpm notice created a lockfile "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" You should commit "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v(" file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nnpm "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("WARN")]),s._v(" demo@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" No description\nnpm "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("WARN")]),s._v(" demo@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" No repository field"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nadded "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("174")]),s._v(" packages from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("138")]),s._v(" contributors and audited "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("529")]),s._v(" packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("379s\nfound "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" vulnerabilities\n")])])]),t("p",[s._v("安装 node-sass 有几个步骤:")]),s._v(" "),t("ol",[t("li",[s._v("校验本地 node_modules 中是否已安装 node-sass，版本是否一致;")]),s._v(" "),t("li",[s._v("如未安装或版本不符，从 npm 源安装 node-sass 本体;")]),s._v(" "),t("li",[s._v("检测全局缓存和本地中是否有 binding.node,如有即跳过安装;")]),s._v(" "),t("li",[s._v("没有 binding.node 则从 github 下载该二进制文件并将其缓存到全局;")]),s._v(" "),t("li",[s._v("假如 binding.node 下载失败，则尝试本地编译出该文件;")]),s._v(" "),t("li",[s._v("将版本信息写到 package-lock.json;")])]),s._v(" "),t("h3",{attrs:{id:"报错的几种原因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#报错的几种原因"}},[s._v("#")]),s._v(" 报错的几种原因")]),s._v(" "),t("ol",[t("li",[s._v("npm 源速度慢")]),s._v(" "),t("li",[s._v("binding.node 源无法访问或速度慢")]),s._v(" "),t("li",[s._v("node 版本与 node-sass 版本不兼容")]),s._v(" "),t("li",[s._v("缓存中 binding.node 版本不一致")]),s._v(" "),t("li",[s._v("编译失败,提示没有安装 python、build 失败等")])]),s._v(" "),t("h3",{attrs:{id:"解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("gyp 环境报错")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 安装 gyp 环境")]),s._v("\nnpm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gyp\n")])])])]),s._v(" "),t("li",[t("p",[s._v("node-sass 安装失败")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 先删除原node-sass")]),s._v("\nnpm uninstall node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除 node_modules 文件夹")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在项目根目录内添加一个 .npmrc 文件，内容如下：")]),s._v("\nphantomjs_cdnurl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cnpmjs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("downloads\nsass_binary_site"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npmmirror"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mirrors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nregistry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npmmirror"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重新安装依赖")]),s._v("\nnpm install\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重新安装 node-sass")]),s._v("\nnpm install node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sass\n")])])])])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.lipinghai.cn/archivers/why-node-sass-always-fail-to-install",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文章"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"canvastotempfilepath"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#canvastotempfilepath"}},[s._v("#")]),s._v(" canvasToTempFilePath")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("在微信小程序中使用 canvas，如果涉及弹窗、定位，或者在 scroll-view 中，canvas 会出现一些 bug。\n官方提供的一种解决方法是将 canvas 转成图片使用。")]),s._v(" "),t("p",[s._v("wx.canvasToTempFilePath(Object object, Object this)")]),s._v(" "),t("p",[s._v("把当前画布指定区域的内容导出生成指定大小的图片。在 draw() 回调里调用该方法才能保证图片导出成功。")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"title"}),t("p",[s._v("canvasToTempFilePath:fail canvas is empty")])]),t("p",[t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("cavans 转图片"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 使用 wx.canvasToTempFilePath() 方法可以将 canvas 绘制的图转成一张图片使用，避免了小程序上使用 canvas的一些坑。\n *\n * 使用时需注意：\n * 1. wx.canvasToTempFilePath() 需在 ctx.draw() 的回调方法中使用\n * 2. wx.canvasToTempFilePath() 在使用时如果在自定义组件中，需传递第二个参数，参数为当前组件对象 如：this\n */")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在 cts.draw 回调中使用")]),s._v("\nctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("draw")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 延时器避免触发一些加载bug")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 本次使用的是 Taro 框架 Taro.canvasToTempFilePath 同 wx.canvasToTempFilePath")]),s._v("\n    Taro"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("canvasToTempFilePath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("x")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("y")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("canvasId")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"canvas"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// canvas 标识")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// success 成功回调")]),s._v("\n          console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"canvasToTempFilePath"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// res 为返回数据 成功时 res.tempFilePath 为图片临时地址 可直接使用")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 失败回调")]),s._v("\n          console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$scope "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// this -> Taro 中 this 指向存在问题，这里需使用 this.$scope")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 若提示 canvasToTempFilePath:fail canvas is empty ，需注意 this.$scope 处")]),s._v("\n")])])]),t("p",[t("a",{attrs:{href:"https://developers.weixin.qq.com/s/QaMtwqmW7BkV",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考微信开发者工具代码片段"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"vue3-this-store-报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue3-this-store-报错"}},[s._v("#")]),s._v(" vue3 this.$store 报错")]),s._v(" "),t("blockquote",[t("p",[s._v("Property '$store' does not exist on type 'ComponentPublicInstance' xxxxx")])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vuex-shim.d.ts")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ComponentCustomProperties "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Store "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vuex'")]),s._v("\n\ndeclare module "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vue/runtime-core'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Declare your own store states.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("State")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" number\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ComponentCustomProperties")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("$store")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Store"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("State"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"javascript-精度丢失"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript-精度丢失"}},[s._v("#")]),s._v(" javascript 精度丢失")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// javascript 精度丢失问题")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// javascript 在数值运算时，若存在小数运算，会出现计算结果不准确的问题")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0.30000000000000004")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0.020000000000000004")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 因此在处理小数运算时，需先将小数转化为整数再执行运算")]),s._v("\n")])])]),t("h2",{attrs:{id:"vue-history模式部署后刷新页面-404"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-history模式部署后刷新页面-404"}},[s._v("#")]),s._v(" vue "),t("code",[s._v("history")]),s._v("模式部署后刷新页面 404")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://router.vuejs.org/zh/guide/essentials/history-mode.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B",target:"_blank",rel:"noopener noreferrer"}},[t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx 配置")]),s._v("\nlocation / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  index index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"git-ssh-登录时报远程主机标识已更改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-ssh-登录时报远程主机标识已更改"}},[s._v("#")]),s._v(" git ssh 登录时报远程主机标识已更改")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" git@github.com\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("     @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nSomeone could be eavesdropping on you right now "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("man-in-the-middle attack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nIt is also possible that a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key has just been changed.\nThe fingerprint "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the RSA key sent by the remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" is\nSHA256: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.\nPlease contact your system administrator.\nAdd correct "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /c/Users/Administrator/.ssh/known_hosts to get rid of this message.\nOffending RSA key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /c/Users/Administrator/.ssh/known_hosts:4\nRSA "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" github.com has changed and you have requested strict checking.\nHost key verification failed.\n")])])]),t("p",[s._v("ssh 会把你每个你访问过计算机的公钥(public key)都记录在~/.ssh/known_hosts。当下次访问相同计算机时，OpenSSH 会核对公钥。如果公钥不同，OpenSSH 会发出警告， 避免你受到 DNS Hijack 之类的攻击。")]),s._v(" "),t("p",[s._v("有以下两个解决方案：")]),s._v(" "),t("ol",[t("li",[s._v("手动删除修改 known_hsots 里面的内容；")]),s._v(" "),t("li",[s._v("修改配置文件 "),t("code",[s._v("~/.ssh/config")]),s._v("，加上这两行，重启服务器。"),t("br"),s._v("\nStrictHostKeyChecking no"),t("br"),s._v("\nUserKnownHostsFile /dev/null")])]),s._v(" "),t("p",[s._v("优缺点：")]),s._v(" "),t("ol",[t("li",[s._v("需要每次手动删除文件内容，一些自动化脚本的无法运行（在 SSH 登陆时失败），但是安全性高；")]),s._v(" "),t("li",[s._v("SSH 登陆时会忽略 known_hosts 的访问，但是安全性低；")])])])}),[],!1,null,null,null);t.default=e.exports}}]);