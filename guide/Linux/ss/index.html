<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux 搭建 vps | xiaoc的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/avatar.jpg">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.ea5e502b.css" as="style"><link rel="preload" href="/assets/js/app.5a23a2ab.js" as="script"><link rel="preload" href="/assets/js/7.4f4f69ac.js" as="script"><link rel="preload" href="/assets/js/2.890c3301.js" as="script"><link rel="preload" href="/assets/js/1.0e465a30.js" as="script"><link rel="preload" href="/assets/js/32.63b839d1.js" as="script"><link rel="prefetch" href="/assets/js/10.0d627009.js"><link rel="prefetch" href="/assets/js/100.e9977c7d.js"><link rel="prefetch" href="/assets/js/101.8f2f0fca.js"><link rel="prefetch" href="/assets/js/102.73694b73.js"><link rel="prefetch" href="/assets/js/103.e240a3a2.js"><link rel="prefetch" href="/assets/js/104.c7d3e838.js"><link rel="prefetch" href="/assets/js/105.906f8764.js"><link rel="prefetch" href="/assets/js/106.1dced9c8.js"><link rel="prefetch" href="/assets/js/107.9529b20b.js"><link rel="prefetch" href="/assets/js/108.bc7b80fa.js"><link rel="prefetch" href="/assets/js/109.2ad53dd2.js"><link rel="prefetch" href="/assets/js/11.621fa9eb.js"><link rel="prefetch" href="/assets/js/110.d0c3a25a.js"><link rel="prefetch" href="/assets/js/111.fe19cbb7.js"><link rel="prefetch" href="/assets/js/112.3d6528d8.js"><link rel="prefetch" href="/assets/js/113.2338695c.js"><link rel="prefetch" href="/assets/js/114.c6719eaf.js"><link rel="prefetch" href="/assets/js/115.ad3ed02c.js"><link rel="prefetch" href="/assets/js/116.23bd1249.js"><link rel="prefetch" href="/assets/js/117.ac1a7bf6.js"><link rel="prefetch" href="/assets/js/118.e45f4e0b.js"><link rel="prefetch" href="/assets/js/119.cc1c271c.js"><link rel="prefetch" href="/assets/js/120.94ec1ca5.js"><link rel="prefetch" href="/assets/js/121.04cd88ed.js"><link rel="prefetch" href="/assets/js/122.7de60dba.js"><link rel="prefetch" href="/assets/js/123.b12fc34b.js"><link rel="prefetch" href="/assets/js/124.8683646c.js"><link rel="prefetch" href="/assets/js/125.15a79816.js"><link rel="prefetch" href="/assets/js/126.9fd3169c.js"><link rel="prefetch" href="/assets/js/127.cb723daa.js"><link rel="prefetch" href="/assets/js/128.7280fa4b.js"><link rel="prefetch" href="/assets/js/129.8016d080.js"><link rel="prefetch" href="/assets/js/130.a0377145.js"><link rel="prefetch" href="/assets/js/131.eecae309.js"><link rel="prefetch" href="/assets/js/132.1253b401.js"><link rel="prefetch" href="/assets/js/133.d6b809f3.js"><link rel="prefetch" href="/assets/js/134.9b63d8eb.js"><link rel="prefetch" href="/assets/js/135.beed4120.js"><link rel="prefetch" href="/assets/js/136.e413b0a7.js"><link rel="prefetch" href="/assets/js/137.f69202bb.js"><link rel="prefetch" href="/assets/js/138.9eaf0104.js"><link rel="prefetch" href="/assets/js/139.ffd9c215.js"><link rel="prefetch" href="/assets/js/14.3672a338.js"><link rel="prefetch" href="/assets/js/140.09063887.js"><link rel="prefetch" href="/assets/js/141.1f350964.js"><link rel="prefetch" href="/assets/js/142.812c4b3e.js"><link rel="prefetch" href="/assets/js/143.195f237f.js"><link rel="prefetch" href="/assets/js/144.b44e40ed.js"><link rel="prefetch" href="/assets/js/145.573950bc.js"><link rel="prefetch" href="/assets/js/146.875db123.js"><link rel="prefetch" href="/assets/js/147.b5b7eebc.js"><link rel="prefetch" href="/assets/js/148.6e6b15be.js"><link rel="prefetch" href="/assets/js/149.f6fef0ba.js"><link rel="prefetch" href="/assets/js/15.4fac6b09.js"><link rel="prefetch" href="/assets/js/150.b2e4c6fb.js"><link rel="prefetch" href="/assets/js/151.3673586d.js"><link rel="prefetch" href="/assets/js/152.52ffb437.js"><link rel="prefetch" href="/assets/js/153.6c759fc1.js"><link rel="prefetch" href="/assets/js/154.4d0c63ac.js"><link rel="prefetch" href="/assets/js/155.c3d13b01.js"><link rel="prefetch" href="/assets/js/156.d8441c9a.js"><link rel="prefetch" href="/assets/js/157.aaccf8dc.js"><link rel="prefetch" href="/assets/js/158.e7a64fb3.js"><link rel="prefetch" href="/assets/js/159.9730ba06.js"><link rel="prefetch" href="/assets/js/16.23ded011.js"><link rel="prefetch" href="/assets/js/160.53df5bb4.js"><link rel="prefetch" href="/assets/js/161.0762f8a0.js"><link rel="prefetch" href="/assets/js/162.f2cac1ee.js"><link rel="prefetch" href="/assets/js/163.d2e7b707.js"><link rel="prefetch" href="/assets/js/164.babc4142.js"><link rel="prefetch" href="/assets/js/165.82366d5d.js"><link rel="prefetch" href="/assets/js/166.558d8d79.js"><link rel="prefetch" href="/assets/js/167.1c3eb22a.js"><link rel="prefetch" href="/assets/js/168.12c30145.js"><link rel="prefetch" href="/assets/js/169.591c0579.js"><link rel="prefetch" href="/assets/js/17.ac2950f0.js"><link rel="prefetch" href="/assets/js/170.c688a65a.js"><link rel="prefetch" href="/assets/js/171.c0f40aa0.js"><link rel="prefetch" href="/assets/js/172.f415fdc2.js"><link rel="prefetch" href="/assets/js/173.4d496e21.js"><link rel="prefetch" href="/assets/js/174.3d3ac8c2.js"><link rel="prefetch" href="/assets/js/175.f8230c9b.js"><link rel="prefetch" href="/assets/js/176.2e705b2e.js"><link rel="prefetch" href="/assets/js/177.373669bf.js"><link rel="prefetch" href="/assets/js/178.c7283304.js"><link rel="prefetch" href="/assets/js/179.80fb1279.js"><link rel="prefetch" href="/assets/js/18.5e4bb2f2.js"><link rel="prefetch" href="/assets/js/180.34a7e083.js"><link rel="prefetch" href="/assets/js/181.add69679.js"><link rel="prefetch" href="/assets/js/182.91b8b6cf.js"><link rel="prefetch" href="/assets/js/183.fc63caf8.js"><link rel="prefetch" href="/assets/js/184.cf024b35.js"><link rel="prefetch" href="/assets/js/185.dc2c3287.js"><link rel="prefetch" href="/assets/js/186.80fd9cf0.js"><link rel="prefetch" href="/assets/js/187.10b38066.js"><link rel="prefetch" href="/assets/js/188.5a620559.js"><link rel="prefetch" href="/assets/js/189.a927b3bf.js"><link rel="prefetch" href="/assets/js/19.fc36f143.js"><link rel="prefetch" href="/assets/js/190.07f26f5b.js"><link rel="prefetch" href="/assets/js/191.255da2ae.js"><link rel="prefetch" href="/assets/js/192.2fdef6a9.js"><link rel="prefetch" href="/assets/js/193.06407c0c.js"><link rel="prefetch" href="/assets/js/194.a90ebece.js"><link rel="prefetch" href="/assets/js/195.29fd1859.js"><link rel="prefetch" href="/assets/js/196.bf4341d6.js"><link rel="prefetch" href="/assets/js/197.4a9de1f8.js"><link rel="prefetch" href="/assets/js/198.8e492034.js"><link rel="prefetch" href="/assets/js/199.44b011f4.js"><link rel="prefetch" href="/assets/js/20.27ddb070.js"><link rel="prefetch" href="/assets/js/200.5f36ce6a.js"><link rel="prefetch" href="/assets/js/201.d051709e.js"><link rel="prefetch" href="/assets/js/202.530dad58.js"><link rel="prefetch" href="/assets/js/203.17f0fa78.js"><link rel="prefetch" href="/assets/js/204.d1159327.js"><link rel="prefetch" href="/assets/js/205.0a87b476.js"><link rel="prefetch" href="/assets/js/206.392ee339.js"><link rel="prefetch" href="/assets/js/207.ee568386.js"><link rel="prefetch" href="/assets/js/21.14e54ac0.js"><link rel="prefetch" href="/assets/js/22.5362d869.js"><link rel="prefetch" href="/assets/js/23.18fda006.js"><link rel="prefetch" href="/assets/js/24.e0671235.js"><link rel="prefetch" href="/assets/js/25.eb171991.js"><link rel="prefetch" href="/assets/js/26.f0f7ebb1.js"><link rel="prefetch" href="/assets/js/27.e24f3e01.js"><link rel="prefetch" href="/assets/js/28.16002380.js"><link rel="prefetch" href="/assets/js/29.b96343b6.js"><link rel="prefetch" href="/assets/js/3.0d1e2d80.js"><link rel="prefetch" href="/assets/js/30.3eec7bbe.js"><link rel="prefetch" href="/assets/js/31.14405f4b.js"><link rel="prefetch" href="/assets/js/33.4a3e5403.js"><link rel="prefetch" href="/assets/js/34.518cbe50.js"><link rel="prefetch" href="/assets/js/35.ef5109b4.js"><link rel="prefetch" href="/assets/js/36.c871f4f8.js"><link rel="prefetch" href="/assets/js/37.0ece2671.js"><link rel="prefetch" href="/assets/js/38.d9c89344.js"><link rel="prefetch" href="/assets/js/39.c181ec3d.js"><link rel="prefetch" href="/assets/js/4.f57222e0.js"><link rel="prefetch" href="/assets/js/40.2d3d294b.js"><link rel="prefetch" href="/assets/js/41.e7810f61.js"><link rel="prefetch" href="/assets/js/42.3fa9566c.js"><link rel="prefetch" href="/assets/js/43.ca366d09.js"><link rel="prefetch" href="/assets/js/44.4989768a.js"><link rel="prefetch" href="/assets/js/45.7466801d.js"><link rel="prefetch" href="/assets/js/46.4df57324.js"><link rel="prefetch" href="/assets/js/47.901e6c60.js"><link rel="prefetch" href="/assets/js/48.307f3d2f.js"><link rel="prefetch" href="/assets/js/49.9decd94d.js"><link rel="prefetch" href="/assets/js/5.9dffc834.js"><link rel="prefetch" href="/assets/js/50.2131e069.js"><link rel="prefetch" href="/assets/js/51.e78e4b5a.js"><link rel="prefetch" href="/assets/js/52.70ab91b6.js"><link rel="prefetch" href="/assets/js/53.eaa6f0a4.js"><link rel="prefetch" href="/assets/js/54.c85dda47.js"><link rel="prefetch" href="/assets/js/55.908c9933.js"><link rel="prefetch" href="/assets/js/56.b5e730a4.js"><link rel="prefetch" href="/assets/js/57.93abcce1.js"><link rel="prefetch" href="/assets/js/58.1d8ac2c3.js"><link rel="prefetch" href="/assets/js/59.9e2d16c9.js"><link rel="prefetch" href="/assets/js/6.a1c74fcd.js"><link rel="prefetch" href="/assets/js/60.23316df9.js"><link rel="prefetch" href="/assets/js/61.dd7fef6c.js"><link rel="prefetch" href="/assets/js/62.1f99b384.js"><link rel="prefetch" href="/assets/js/63.12f80bcc.js"><link rel="prefetch" href="/assets/js/64.ec2c56df.js"><link rel="prefetch" href="/assets/js/65.d74318cf.js"><link rel="prefetch" href="/assets/js/66.e3a64901.js"><link rel="prefetch" href="/assets/js/67.ab53b0b9.js"><link rel="prefetch" href="/assets/js/68.ae7cab1b.js"><link rel="prefetch" href="/assets/js/69.07ad46e2.js"><link rel="prefetch" href="/assets/js/70.5de26513.js"><link rel="prefetch" href="/assets/js/71.fce3ecaa.js"><link rel="prefetch" href="/assets/js/72.303b6432.js"><link rel="prefetch" href="/assets/js/73.c286832f.js"><link rel="prefetch" href="/assets/js/74.4523e36c.js"><link rel="prefetch" href="/assets/js/75.e5633273.js"><link rel="prefetch" href="/assets/js/76.5e3a2028.js"><link rel="prefetch" href="/assets/js/77.ba3114d5.js"><link rel="prefetch" href="/assets/js/78.ccb476b1.js"><link rel="prefetch" href="/assets/js/79.4006e58e.js"><link rel="prefetch" href="/assets/js/8.58388833.js"><link rel="prefetch" href="/assets/js/80.7a996f28.js"><link rel="prefetch" href="/assets/js/81.d8ab3e60.js"><link rel="prefetch" href="/assets/js/82.8cfb4a9c.js"><link rel="prefetch" href="/assets/js/83.24c596f9.js"><link rel="prefetch" href="/assets/js/84.fe1b5e78.js"><link rel="prefetch" href="/assets/js/85.39094bd3.js"><link rel="prefetch" href="/assets/js/86.d7569df3.js"><link rel="prefetch" href="/assets/js/87.b634e8f4.js"><link rel="prefetch" href="/assets/js/88.fa76e7f8.js"><link rel="prefetch" href="/assets/js/89.12514e4e.js"><link rel="prefetch" href="/assets/js/9.da8464c7.js"><link rel="prefetch" href="/assets/js/90.52202cf6.js"><link rel="prefetch" href="/assets/js/91.ea0e88ba.js"><link rel="prefetch" href="/assets/js/92.eadea5b4.js"><link rel="prefetch" href="/assets/js/93.6f5af6a0.js"><link rel="prefetch" href="/assets/js/94.61e0b8bb.js"><link rel="prefetch" href="/assets/js/95.1df738f5.js"><link rel="prefetch" href="/assets/js/96.91aaaa5d.js"><link rel="prefetch" href="/assets/js/97.6619c14f.js"><link rel="prefetch" href="/assets/js/98.3dcdfb56.js"><link rel="prefetch" href="/assets/js/99.2c1c8399.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.20c11dcf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea5e502b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>xiaoc的博客</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.jpg" alt="xiaoc的博客" class="logo"> <span class="site-name">xiaoc的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active"><i class="iconfont reco-document"></i>
  文档
</a></div><div class="nav-item"><a href="/Javascript/" class="nav-link"><i class="iconfont reco-api"></i>
  Javascript
</a></div><div class="nav-item"><a href="/ECMAScript6/" class="nav-link"><i class="iconfont reco-api"></i>
  ECMAScript6
</a></div><div class="nav-item"><a href="/Typescript/" class="nav-link"><i class="iconfont reco-api"></i>
  Typescript
</a></div><div class="nav-item"><a href="/css/" class="nav-link"><i class="iconfont reco-api"></i>
  Css
</a></div><div class="nav-item"><a href="https://github.com/xiaocking" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>169</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active"><i class="iconfont reco-document"></i>
  文档
</a></div><div class="nav-item"><a href="/Javascript/" class="nav-link"><i class="iconfont reco-api"></i>
  Javascript
</a></div><div class="nav-item"><a href="/ECMAScript6/" class="nav-link"><i class="iconfont reco-api"></i>
  ECMAScript6
</a></div><div class="nav-item"><a href="/Typescript/" class="nav-link"><i class="iconfont reco-api"></i>
  Typescript
</a></div><div class="nav-item"><a href="/css/" class="nav-link"><i class="iconfont reco-api"></i>
  Css
</a></div><div class="nav-item"><a href="https://github.com/xiaocking" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/web/drawingBoard/drwaingBoard.html" class="sidebar-link">Javascript 实现简单画板</a></li><li><a href="/guide/web/errorHandler/" class="sidebar-link">vue 全局异常捕获</a></li><li><a href="/guide/web/qiankun/" class="sidebar-link">Qiankun 微前端框架初探(vue2)</a></li><li><a href="/guide/web/storageLib/" class="sidebar-link">lz-storage-lib</a></li><li><a href="/guide/web/taroUpdate/taroUpdate.html" class="sidebar-link">Taro 升级 2.x 最新版本</a></li><li><a href="/guide/web/vue/" class="sidebar-link">Vue 笔记</a></li><li><a href="/guide/web/vue-auto-load-router/" class="sidebar-link">vue 自动注入路由、公共组件</a></li><li><a href="/guide/web/vue3-project/" class="sidebar-link">搭建 vue3 规范的项目环境</a></li><li><a href="/guide/web/vue3-treeTransfer/" class="sidebar-link">vue3 基于 element-plus 扩展树形穿梭框</a></li><li><a href="/guide/web/vueconfig/" class="sidebar-link">vue/cli 简单实用配置</a></li><li><a href="/guide/web/x-dialog/" class="sidebar-link">在线客服弹窗</a></li><li><a href="/guide/web/z-codeSegment/codeSegment.html" class="sidebar-link">代码片段</a></li><li><a href="/guide/web/z-problem/problem.html" class="sidebar-link">常见问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>插件/工具相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/tools/airbnb/" class="sidebar-link">Airbnb JavaScript 风格指南</a></li><li><a href="/guide/tools/eslintrc/eslintrc.html" class="sidebar-link">.eslintrc 配置详解</a></li><li><a href="/guide/tools/fiddler/" class="sidebar-link">Fiddler 抓包安装使用</a></li><li><a href="/guide/tools/git/git.html" class="sidebar-link">Git 安装使用</a></li><li><a href="/guide/tools/miniProgramCi/miniProgramCi.html" class="sidebar-link">uni-app 微信小程序自动上传版本</a></li><li><a href="/guide/tools/prettier/prettier.html" class="sidebar-link">.prettierrc 配置详解</a></li><li><a href="/guide/tools/toolset/toolset.html" class="sidebar-link">常用框架及工具整理</a></li><li><a href="/guide/tools/tsconfig/tsconfig.html" class="sidebar-link">tsconfig.json 配置详解</a></li><li><a href="/guide/tools/vscodePlugin/vscodePlugin.html" class="sidebar-link">VS Code常用插件</a></li><li><a href="/guide/tools/webpack/webpack.html" class="sidebar-link">webpack 常用插件</a></li><li><a href="/guide/tools/yarn/yarn.html" class="sidebar-link">yarn 安装使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>nodeJs相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/nodeJs/httpServer/" class="sidebar-link">http-server 安装使用</a></li><li><a href="/guide/nodeJs/mongo-command/" class="sidebar-link">mongo 常用命令</a></li><li><a href="/guide/nodeJs/mongoDB-install/" class="sidebar-link">mongoDB 安装配置</a></li><li><a href="/guide/nodeJs/mongoose/" class="sidebar-link">mongoose 相关</a></li><li><a href="/guide/nodeJs/node-video/" class="sidebar-link">NodeJs 实现简单视频播放</a></li><li><a href="/guide/nodeJs/nodeJs/" class="sidebar-link">nodeJs 相关</a></li><li><a href="/guide/nodeJs/nodeJs-mall/" class="sidebar-link">nodeJs 邮件发送</a></li><li><a href="/guide/nodeJs/nodeTree/" class="sidebar-link">NodeJs 生成本地文件树</a></li><li><a href="/guide/nodeJs/npm/" class="sidebar-link">NPM 相关</a></li><li><a href="/guide/nodeJs/nrm/" class="sidebar-link">nrm 安装使用</a></li><li><a href="/guide/nodeJs/nvm/" class="sidebar-link">nvm 安装使用</a></li><li><a href="/guide/nodeJs/pnpm/" class="sidebar-link">pnpm 相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Linux相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/Linux/code-server/code-server.html" class="sidebar-link">vscode 远程开发</a></li><li><a href="/guide/Linux/linux-command/" class="sidebar-link">Linux 命令</a></li><li><a href="/guide/Linux/linux-install-nodeJs/" class="sidebar-link">Linux 安装 nodeJs</a></li><li><a href="/guide/Linux/linux-set-auth/" class="sidebar-link">Linux 设置 root 权限</a></li><li><a href="/guide/Linux/nginx/nginx.html" class="sidebar-link">Linux 安装 nginx</a></li><li><a href="/guide/Linux/sn/" class="sidebar-link">screen 命令</a></li><li><a href="/guide/Linux/ss/" aria-current="page" class="active sidebar-link">Linux 搭建 vps</a></li><li><a href="/guide/Linux/updateCore/" class="sidebar-link">CentOs7 升级/更新内核</a></li><li><a href="/guide/Linux/vnc-viewer/" class="sidebar-link">Centos7搭建使用图形化界面</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/other/cdn/" class="sidebar-link">使用 CDN 加载项目静态资源</a></li><li><a href="/guide/other/gitee/gitee.html" class="sidebar-link">Gitee Page搭建个人博客</a></li><li><a href="/guide/other/githubPages/GitHubPages.html" class="sidebar-link">Github Pages 建立个人博客网站</a></li><li><a href="/guide/other/gitlab_ci_cd/" class="sidebar-link">Gitlab 配置 CI/CD</a></li><li><a href="/guide/other/jenkins/" class="sidebar-link">jenkins 安装配置</a></li><li><a href="/guide/other/markdown/" class="sidebar-link">Markdown 相关语法</a></li><li><a href="/guide/other/open_with_code/" class="sidebar-link">win10 使用 vscode 打开文件(夹)</a></li><li><a href="/guide/other/vuepress/" class="sidebar-link">Vuepress markdown扩展语法</a></li><li><a href="/guide/other/vuepress-emoji/" class="sidebar-link">vuepress 所有支持的 Emoji</a></li><li><a href="/guide/other/windows/" class="sidebar-link">windows 相关</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Linux 搭建 vps</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="linux-搭建-vps"><a href="#linux-搭建-vps" class="header-anchor">#</a> Linux 搭建 vps</h1> <blockquote><p>Centos7.9</p></blockquote> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>执行网友编写的一套集成脚本、一键安装 shadowsocks-libev</p> <div class="custom-block tip"><p class="title"></p><p>一键脚本已集成TCP优化、自动开启Google BBR（限 4.9 或更高版本内核）、自动安装 shadowsocks-libev</p> <p>如需升级内核参考 <a href="http://xiaocjee.gitee.io/guide/Linux/updateCore/#%E5%86%85%E6%A0%B8%E5%AE%9A%E4%B9%89" target="_blank" rel="noopener noreferrer">升级/更新 Centos 7 内核<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div><div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># bash &lt;(wget --no-check-certificate -qO- https://down.vpsaff.net/linux/shadowsocks/centos-shadowsocks-libev.sh)</span>

<span class="token comment"># 下载脚本</span>
wget https<span class="token punctuation">:</span>//down.24kplus.com/linux/shadowsocks/centos<span class="token punctuation">-</span>shadowsocks<span class="token punctuation">-</span>libev.sh

<span class="token comment"># 执行脚本安装</span>
chmod +x centos<span class="token punctuation">-</span>shadowsocks<span class="token punctuation">-</span>libev.sh <span class="token important">&amp;&amp;</span> ./centos<span class="token punctuation">-</span>shadowsocks<span class="token punctuation">-</span>libev.sh
</code></pre></div><h3 id="安装说明"><a href="#安装说明" class="header-anchor">#</a> 安装说明</h3> <p>1、 提示设置SS密码，输入自定义密码后按回车，也可以直接按回车使用默认密码</p> <p><img src="data:image/png;base64,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" alt="ss1"></p> <p>2、 接下来选择SS要使用的服务器端口，输入自己喜欢的端口， 也可以直接按回车使用默认端口</p> <p><img src="data:image/png;base64,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" alt="ss2"></p> <p>3、 然后选择加密方式（仅保留相对安全的加密方式），如果选择chacha20的话，就输入对应序号3，按回车继续</p> <p><img src="data:image/png;base64,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" alt="ss3"></p> <p>4、 安装完成后，会有如下图安装成功的提示，记住各项信息，在客户端连接时需要用到</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkMAAABQCAIAAACVhubQAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AABATSURBVHic7Z1bqyXHdcfXzFgzGimJkYyNoWMcx6Qmlh9scIyNBYYO6CGhmrzlK/R71+eo/V5fIXnseouhIQ+GgIgNtiWfIjYypm1ZiSMJRUp0JM3koS+7u1dV79rX3vvs/489zDnr1GWt6uquXZdeiwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHcSoaq6oVJiv2KMPJxa+yBUtYMt0uzXAtuzm56D3OELN74c+1V0aRy9K3pb/kD30SFVOiSnvzvA0twf/iKUabtYZU7fEWKeYE6nSZIkud2vTKfT+DLAAZi9cNd8OfayfedbZtv76LAc6C6OR5qz+eIKjsR6JBOqMrLtY0leigyXHgAAwAXQj2RSFU6n2joiInI215ZoPU1bT9KEqirVTd74gkVlzHBqL1RVmfVUTwkiaerp2oI0dV1XhRBFk9BIGn8T27RcEFvmYGVj9CUt2sw9p62h7BmryGMRDRo5m1Gef4Vtm89fO7d9pGll5MROoaq1Uns3iO9ydA0SVKkVj7vF7DfvgJ68TPJ12lBFkdmjbY/vdYHu7e82++LrDJNuI1RVVVVV153p1aAzKs/V3FRRkzZgpr/lvXcHuC78E/hmEV8QifWtLFRVN8LhGv8o5XgkC95Uky2CqQozI1l4YNtQZjBVnJlCVXV34wiptn10e7P729Orq7eRPcpPH+ltEq/yPtvbBm4eWkKqTrlmNKyq8eXdpkH8F47tk9WzKglpuvRDS+cGsoCe3jK9ndZbUXz2MCHbo3rdzLLbtC95Wz5uP8nTGXi3aevrvuX0JQeuprf2QHuGvppNUoYeQYTVxWugm5MJ4enQIpPCltYROVvaQZJGSO7GkXgiWMpJMVZr56t7nf1w7FJmvJlERIKaBM7q3G/XfGW+7N6KmEXeRvYp75wTT8T6USGEaDOw2r22C6Wk1e383Nluot48UqTT6cjuPRvEy6xKzmrbGEi2tLJdBpeZ5F1vCLfdX2arwbjTeiraJvv2tu/b6w52c3k7g7fbOOfI3bT/3EBJ7801WxFrz80pZx9B4M5zf8Pfhz2y71mjbupLOfuH9VLJ4b4n7VtmpJlO57ntl1W2Xr4JZfc1nd+ijS0vnggiV1qSmRBPyDX/C+dcVO3zl1hI4ZyQgx3UYIP0K2c7LXJ5VRqunBWifSb2I8z8QBbU01em135/RdHZd7N9g/IejnFzRfa6qOwbBtdQe8al3KPVwaXTjWSh70tDobuZ6yiz/W6QTJmCbHuu5EBfnfYvM9pMZ3WepmmSpCtXbL8xFJs9ZFHkNXI3TogsEy7XTmSZEK3YW7vXdm9FbpXnaW6lGTwlAxZ1R4eSdJe5iVclt2qLTIbN0owwYuOMzK+nv0wvvoq2yL4X+3abPTngk2E+ZXx7elMGH0E2v9qzsVdDPyezeiVUtxxOQholyZXWyaxZes7k3DeeccqNtd40dbCUQmSjTi9kJnwpnXOs10aVGaH8nJlCGbXe8h7dlu1+wGxFM9l9TC3yNrJfeeecLCTdOFtSUXSrYZ7avdmd1laq6dZIi80HY9mWFnkvnA+fSsPBVxrVNYAtrczUhoHMb3uwTC/TirbMvjuzjcy7t/9G8LZ8zOXwdob4W4bIczW9tc+25/jJ4Es59wjCPtmV4TkiFTjU1/483LMNn12cfIeU/dEsxbaAxysj3RIVT9kn7Y9sRZa5XpSY1BRp5rCJ5FihmAUdT/ZARX6LvI3sO3zYb/gPDxr6lY88uzjRc33gJNAgAcYXznc5gqfdQlVJE7GYFsjsFYcOUvCKtsruK81n+xa9jt0y4RthesvMCBmRZxfbk8kjQ2bPLrLaw5d4umbqS+l/BBFGMrATV9lt4FUAAA/X5bEFLMamEx/RiO5QecRqwx3E5rvtCAEAANiXzx2qIKc1VXUtyNnVwQ5jg5Nyn+ge0b3+97+gT2+JPu4+nyyoGgAAhLm3OQm4FqZfawR9Ovz1KdHHX/nKxx23t7dPnz49oXoAAODnYHMycOe5T/T48ePHjx/3ktvb27feems5jQAAgAgjGdiHhw8fxiT7AZP8OCLX95jk35jklVdemUjeeOONGJUAAHeJdnVRqKoSun99UJra0NHeJhTKmKI5OevsSuu1N6SFEKqqirV/hlWaajc+gelsnudLq3lkvswk/MjZV5nkN0zyrxF1/QOTfMwknzHJvzDJC0zyt0zyMybhOn+HSfiyO6/rEZNwDQEAJ6A9u+i0Hr7uqqTNj/VSvDRVHzwmyUvKlg8f06iTW7L50CtF70cgza0wC0RsAwAAEMHax0eeW6mUIJKqoJVux7H4N6Mjg1nITLrWRyq1DlHtqKYl4mtswFmtZ52fAgAAWI7B+2RWr6hQxhjRH6MXyhSk0yRJNcV4GRRSunze355zThRGycnAsJ6ppZpkNQy5Mi5z5CCyd4IXnX0nhFTqAl+Si3GgdTb8H9H7RH8cfP4w+LxD9E5cOb/vPm93P+yszydEz3bNDgA4JcM3o53WVkq5DkgRDHcSZHMwC6fTNHdSVdXAgc15xtfoovvVlZEux0tyR+VDGh/5H/MselB51n2ebpOL8xHRB0TvEr1L9D++bTwAwPkwPrtoS0s08sQ6jcgwf+ohbt7ibJ42vqulMsaoMi2pcUM30EQQ9c5wx9ltaU0myVqZSVvmrTQ6ezzN0Y9dcy+P02mil1bi4nlGdEt0S/TS0poAAEJsOoUvRD8mbPZ0vi3Oam2Lxsn1FsNGM5QJGg5klz7qnAFvR0g4rzHJXzLJr5nkdSbhbtN+yyTfYJI3meTnTPJFJuH8gkkeMMmfRZQDAFiEWb+L/pAf4WArMQhlhv60m/2nS4mvcVlc1D4ZAADszLwHYafzFamqritF/TEQq1dUVHVdmydu+5P6Tusy6+JZVP3+k81TK1qxycoN4cttaaUcRqTaLvuUJhqEkU2gDbjuBgCAiwJ+F8Fe8NXFXzEJX11MmORQq4vc6QhfXayZ5Hkm4auLf8UknJ9GpAEAHBx4qwLH5Rp6WHMq5IOl1QDgarmG5wxYjPtEn19ah6PyjOhNotul1QDgysHqItiCV5mEn01/MP75AdE/H6j2P2USTIMAAHTAmNEATLjn220CAICDg5EMHAvM9wEAp6EdyYSqhm8eSXPMF5F6Z791XRklFz/zLruXAjrXVDtoNPSrDBowIQMAnAZEdSEiBHA5PPcwJwMAnApEdRkzDODCbfeW2bxOXYjO4TC8ahBh2RoAcEIGp/CtXqlKGSHFKs3HUV0sSVMZVW5ybSiktGmSzCVqo7rc5KUbOveVppIuTxPrhDSmMjd9wOppmaU1WecLsvchHJ99A00AF6tnbZ+WmSQkVGUoPy/Xj0JVVeGiQ39/m+jFsYRHSeYLhtyD4t/FabcDOKkIAPCCqC6NpSyAy6ztu0eKOWP+e2kFAABgNxDVpUnlc6UftP1Cgm5uGdWlJvoS0aPj6QMAAMcBUV3CHNX28+Mzov8g+ubSagAAwLYgqksAr+2zCJGd15HH7aO6vEf0i/3iI3+2R14AANgNRHUJK+qxfc4s2262XfbZxfeIfkL0W6KXfX7l5/mU6JOjKAUAAHPgnR9wYLjL4PcX0AIAcEXgtR8AAACXDaK6gCBfZpIPmQTveAEAFgdzMgAAAJcNRjIAAACXDUayMWO3jgAAAM6fdp9MqKoSuvfQJ01tKNph31asff4SETmb5/m83xCwGHyf7PtMckNERM8RPd9JfsnSvMwk/JW1322nWgvX8EtMUjPJF5jkj0zyNSZ5i0n+K6QWAOC0nD6qC0Ko3EE+XVoBAMA1c/KoLkMGIVTW0S6rYVCWvjQzqGYi5EEuO7Uiw7JQ6w6jriuTbdN4oOMZBjMAwHIM9smsXlGhjDGid2nRRTZJUk1FxORJSOnydr4V44Fett6qiGybLUmtrJq5oVCmIJt2ETlVO+QwobtxY1f14kkjDCs/0VMoU7g8TZK8pIt20DFme29V+/C/J6oHAACmnDyqC/lCqAyVuHG0DsoiqKnUWb1ONxU614Rx6adiQtjSxodlGafcqD4I8QH8LgIAlmB8dtGWluxsVJd5okOoJEm/U9bP/trhrZ9EOJ3ntl8gbOdUPqErLclMiCfkmv9F5+w4pDzT80LitGyH02lylFM7M3x00toAAIBo4agu61raNUPtiKSpVSt2VudWN3/vwzZ7hO7GiSzLyOWaVJaRcKXbTvlhStDBO8d/Mgk/l/g2kxyvYXldXPL3TPLvTPIuk/DTjACAs+XkUV3C3NC4TKGMWsd/aYcir5Ccc7KQdONsSUXROMmPD8syTnlAixbmtPtkAACwFCeP6hKoR1thJmU6ramN/1JJlzenKb1CcqV15ErbLBN2Q250WBan85UwVV2bjLBPBgAAFwaiuoAgf8MkX43I9QaTvHkAXXYnZnXxHSZ5ehRdAABHAb7wQZDXIyQAALA48LsIAADgssHqIliSrxO9REREL7A/8fnfbkf8+Yrob3YqBwBwtmB1EWzmAdFDoodELxA9InpE9JDoeaJHRJ8jetAla74W/Yhlf4lJvn5EZQEAVwdWF3uEqs7mzDr3JRnDoUPS/LD7vEr0XaJvEX2L6K+JvkaUEH2B6E+IniO6333uYY4PAFiCdiSbPMWlOdqLSGtXwdGOhg9NYJhwOj2cRwxpBu5KRr9soxIAAIDNtKuLTmtbGyOT3HZRXZJjRnWJ8S98+chMkrUkM3EXnWEBAMCZsGhUlx6hqkp1WYc5e3eMlek9e3gqGi+rNb8NylwrL01d11UhOifGfUS2qdPHGdt9evpw1opMEslM2HUw0YFFTf6ASkSU8Yq8cWoQkgYAcN0sGtVllLUQZZ4kSbqiQvWrcpV0Om0iuDwZerOfVGRL23rQIiKZde782zIHytumCtc5MW5XE51OkyRdjTQO2O7TM4ArrcikzIQtb2hqUaqpCV8TUMlXkVelcEiavb1V/Tn7vMg+L0R8vsg+H7IPT/Mq+3BeYx8OLxkAcMdYNKrLaAbSVDSI6iKUklbrZjrjrLbDkicVDYYymcnenf92yo+VDNnO9AzjSiuUErbs2nNgkbPautkCeIP4VEJIGgDA1bNwVJf1EQtv1mB57A/dUCaUWg9k2yk/W0mffav4L660JMZe+AfBsQsxN75ubJCNKi0R1QUAAE7PeUR1ial9A1avlMkkSWG7Pb59lT+A7U6nCRGtl/32PO3iVQkhaQAA180ZRXVhtWttpWpjuAi5DuYSVJYKU4jhnDIY1UWIbMMULT4oTDxOa7fechPSDDfadlRpJiQNoroAAK6DJaK6DPfJZp+0Nk9tezDPZDebBhNXWkejxVG3cpnhUV2c1rbVoam9WfGrCtH+ZGTI9n2xeWpFu75osrIcRLAZq+S30KcSQtIAAK6du+STQaiqErrbGRKqMpRfx4trByFhkvpouQ7FPzLJP52wdgDAmXCHvFW1p/iWVgMAAMBpuSMjmTRNDGmc1AMAgKvj/wFlY0gp/BThpgAAAABJRU5ErkJggg==" alt="ss3"></p> <div class="custom-block tip"><p class="title"></p><p>SS服务端安装成功后，就可以在电脑、手机、路由器等设备上的SS客户端上，按照以上设置的各项参数进行连接了。</p></div><h2 id="vps-网络优化"><a href="#vps-网络优化" class="header-anchor">#</a> vps 网络优化</h2> <blockquote><p>优化 CentOS 7 或者 Ubuntu 16.04 以上版本下的 shadowsocks-libev 网络速度，让 shadowsocks-libev 轻松跑满宽带。</p></blockquote> <h3 id="一、优化吞吐量"><a href="#一、优化吞吐量" class="header-anchor">#</a> 一、优化吞吐量</h3> <p>1、编辑配置文件内容</p> <div class="language-yml extra-class"><pre class="language-yml"><code>sudo vi /etc/sysctl.d/local.conf
</code></pre></div><p>在文件最后添加一行</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment">#max open files</span>
fs.file<span class="token punctuation">-</span>max = 51200
<span class="token comment">#max read buffer</span>
net.core.rmem_max = 67108864
<span class="token comment">#max write buffer</span>
net.core.wmem_max = 67108864
<span class="token comment">#default read buffer</span>
net.core.rmem_default = 65536
<span class="token comment">#default write buffer</span>
net.core.wmem_default = 65536
<span class="token comment">#max processor input queue</span>
net.core.netdev_max_backlog = 4096
<span class="token comment">#max backlog</span>
net.core.somaxconn = 4096
<span class="token comment">#resist SYN flood attacks</span>
net.ipv4.tcp_syncookies = 1
<span class="token comment">#reuse timewait sockets when safe</span>
net.ipv4.tcp_tw_reuse = 1
<span class="token comment">#turn off fast timewait sockets recycling</span>
net.ipv4.tcp_tw_recycle = 0
<span class="token comment">#short FIN timeout</span>
net.ipv4.tcp_fin_timeout = 30
<span class="token comment">#short keepalive time</span>
net.ipv4.tcp_keepalive_time = 1200
<span class="token comment">#outbound port range</span>
net.ipv4.ip_local_port_range = 10000 65000
<span class="token comment">#max SYN backlog</span>
net.ipv4.tcp_max_syn_backlog = 4096
<span class="token comment">#max timewait sockets held by system simultaneously</span>
net.ipv4.tcp_max_tw_buckets = 5000
<span class="token comment">#turn on TCP Fast Open on both client and server side</span>
net.ipv4.tcp_fastopen = 3
<span class="token comment">#TCP receive buffer</span>
net.ipv4.tcp_rmem = 4096 87380 67108864
<span class="token comment">#TCP write buffer</span>
net.ipv4.tcp_wmem = 4096 65536 67108864
<span class="token comment">#turn on path MTU discovery</span>
net.ipv4.tcp_mtu_probing = 1

net.ipv4.tcp_congestion_control = bbr <span class="token comment"># 增加</span>
</code></pre></div><p>2、运行</p> <div class="language-yml extra-class"><pre class="language-yml"><code>sysctl <span class="token punctuation">-</span><span class="token punctuation">-</span>system
</code></pre></div><p>3、编辑配置文件 <code>limits.conf</code></p> <div class="language-yml extra-class"><pre class="language-yml"><code>sudo vi /etc/security/limits.conf
</code></pre></div><p>在文件最后添加</p> <div class="language-yml extra-class"><pre class="language-yml"><code>* soft nofile 51200
* hard nofile 51200
</code></pre></div><p>4、编辑 shadowsocks-libev 服务</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># 服务配置文件 （找自己的配置文件）</span>
sudo vi /etc/systemd/system/shadowsocks<span class="token punctuation">-</span>libev.service
</code></pre></div><p>在[Service]之后加入 <code>ExecStartPre=/bin/sh -c ‘ulimit -n 51200’</code></p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
Description=Shadowsocks<span class="token punctuation">-</span>libev Server
After=network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
Type=simple
<span class="token comment"># 服务配置可能有所不一样，视实际而定</span>
<span class="token comment"># 在这里加入 ExecStartPre=/bin/sh -c 'ulimit -n 51200'</span>
ExecStartPre=/bin/sh <span class="token punctuation">-</span>c 'ulimit <span class="token punctuation">-</span>n 51200'
ExecStart=/usr/local/bin/ss<span class="token punctuation">-</span>server <span class="token punctuation">-</span>c /etc/shadowsocks<span class="token punctuation">-</span>libev/config.json <span class="token punctuation">-</span>u
Restart=on<span class="token punctuation">-</span>abort

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy=multi<span class="token punctuation">-</span>user.target
</code></pre></div><p>5、重新加载 shadowsocks-libev 服务配置</p> <div class="language-yml extra-class"><pre class="language-yml"><code>sudo systemctl daemon<span class="token punctuation">-</span>reload
</code></pre></div><p>6、重启 Shadowsocks-libev 服务</p> <div class="language-yml extra-class"><pre class="language-yml"><code>sudo systemctl restart shadowsocks<span class="token punctuation">-</span>libev
</code></pre></div><h3 id="二、开启tcp-fast-open"><a href="#二、开启tcp-fast-open" class="header-anchor">#</a> 二、开启TCP Fast Open</h3> <div class="language-yml extra-class"><pre class="language-yml"><code>TCP Fast Open可以降低Shadowsocks服务器和客户端的延迟。
实际上在上一步已经开启了TCP Fast Open，现在只需要在Shadowsocks配置中启用TCP Fast Open。
</code></pre></div><p>1、编辑config.json：</p> <div class="language-yml extra-class"><pre class="language-yml"><code>sudo vi /etc/shadowsocks<span class="token punctuation">-</span>libev/config.json
</code></pre></div><p>将 fast_open 的值由 false 修改为 true</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;server&quot;</span><span class="token operator">:</span><span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;server_port&quot;</span><span class="token operator">:</span><span class="token number">8388</span><span class="token punctuation">,</span>
	<span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span><span class="token number">1080</span><span class="token punctuation">,</span>
	<span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span><span class="token number">600</span><span class="token punctuation">,</span>
	<span class="token property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;aes-256-cfb&quot;</span><span class="token punctuation">,</span>
	<span class="token comment">// 这里设置 fast_open：true，如果没有则加入</span>
	<span class="token property">&quot;fast_open&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>2、重启 shadowsocks-libev 服务：</p> <div class="language-yml extra-class"><pre class="language-yml"><code>sudo systemctl restart shadowsocks<span class="token punctuation">-</span>libev
</code></pre></div><h3 id="三、开启-google-bbr"><a href="#三、开启-google-bbr" class="header-anchor">#</a> 三、开启 Google BBR</h3> <div class="custom-block tip"><p class="title"></p><p>Google 开源了其 TCP BBR 拥塞控制算法，并提交到了 Linux 内核，从 4.9 开始，Linux 内核已经用上了该算法。根据以往的传统，Google 总是先在自家的生产环境上线运用后，才会将代码开源，此次也不例外。 根据实地测试，在部署了最新版内核并开启了 TCP BBR 的机器上，网速甚至可以提升好几个数量级。</p></div><p>1、查看BBR是否已经载入了系统模块</p> <blockquote><p>lsmod | grep bbr</p></blockquote> <p>2、如果结果中没有tcp_bbr，则先运行：</p> <div class="language-yml extra-class"><pre class="language-yml"><code>1. 查看linux内核版本 大于7.3即可
cat /etc/redhat<span class="token punctuation">-</span>release

2. 执行一键安装脚本
wget <span class="token punctuation">-</span><span class="token punctuation">-</span>no<span class="token punctuation">-</span>check<span class="token punctuation">-</span>certificate https<span class="token punctuation">:</span>//github.com/teddysun/across/raw/master/bbr.sh <span class="token important">&amp;&amp;</span> chmod +x bbr.sh <span class="token important">&amp;&amp;</span> ./bbr.sh

3. 脚本执行完成会提示是否重启，输入 y 即可重启
</code></pre></div><p>3、检测是否安装完成：</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># 1. 验证当前的TCP算法</span>
sysctl net.ipv4.tcp_available_congestion_control
<span class="token comment"># 输出： net.ipv4.tcp_available_congestion_control = reno cubic bbr # 有 bbr 即可  </span>


<span class="token comment"># 2. 查看BBR是否启动</span>
sysctl net.ipv4.tcp_congestion_control
<span class="token comment"># 输出: net.ipv4.tcp_congestion_control = bbr </span>

<span class="token comment"># 3. 查看BBR是否已经载入了系统模块</span>
lsmod <span class="token punctuation">|</span> grep bbr
<span class="token comment"># 输出: tcp_bbr                20480  8 </span>
</code></pre></div><p>优化到此基本完成。</p> <h2 id="客户端下载使用"><a href="#客户端下载使用" class="header-anchor">#</a> 客户端下载使用</h2> <p><a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="noopener noreferrer">shadowsocks windows 版本下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/shadowsocks/shadowsocks-android/releases" target="_blank" rel="noopener noreferrer">shadowsocks Android 版本下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <h3 id="一键安装-ss-libev-脚本"><a href="#一键安装-ss-libev-脚本" class="header-anchor">#</a> 一键安装 ss-libev 脚本</h3> <details class="custom-block details"><summary>See More</summary> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin
<span class="token builtin class-name">export</span> <span class="token environment constant">PATH</span>

<span class="token assign-left variable">red</span><span class="token operator">=</span><span class="token string">'\033[0;31m'</span>
<span class="token assign-left variable">green</span><span class="token operator">=</span><span class="token string">'\033[0;32m'</span>
<span class="token assign-left variable">yellow</span><span class="token operator">=</span><span class="token string">'\033[0;33m'</span>
<span class="token assign-left variable">plain</span><span class="token operator">=</span><span class="token string">'\033[0m'</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$EUID</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] This script must be run as root!&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>

<span class="token assign-left variable">cur_dir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span> <span class="token builtin class-name">pwd</span> <span class="token variable">)</span></span>

<span class="token assign-left variable">libtool_file</span><span class="token operator">=</span><span class="token string">&quot;libtool-2.4.6&quot;</span>
<span class="token assign-left variable">libtool_url</span><span class="token operator">=</span><span class="token string">&quot;https://down.vpsaff.net/linux/libtool-2.4.6.tar.gz&quot;</span>

<span class="token assign-left variable">shadowsocks_libev_config</span><span class="token operator">=</span><span class="token string">&quot;/etc/shadowsocks-libev/config.json&quot;</span>
<span class="token assign-left variable">shadowsocks_libev_service</span><span class="token operator">=</span><span class="token string">&quot;/etc/systemd/system/shadowsocks-libev.service&quot;</span>

<span class="token assign-left variable">libsodium_file</span><span class="token operator">=</span><span class="token string">&quot;libsodium-1.0.18-stable&quot;</span>
<span class="token assign-left variable">libsodium_url</span><span class="token operator">=</span><span class="token string">&quot;https://down.vpsaff.net/linux/libsodium-1.0.18-stable.tar.gz&quot;</span>

<span class="token assign-left variable">mbedtls_file</span><span class="token operator">=</span><span class="token string">&quot;mbedtls-2.16.6&quot;</span>
<span class="token assign-left variable">mbedtls_url</span><span class="token operator">=</span><span class="token string">&quot;https://down.vpsaff.net/linux/mbedtls/mbedtls-2.16.6-gpl.tgz&quot;</span>

<span class="token assign-left variable">localconf_file</span><span class="token operator">=</span><span class="token string">&quot;local&quot;</span>
<span class="token assign-left variable">localconf_url</span><span class="token operator">=</span><span class="token string">&quot;https://down.vpsaff.net/linux/shadowsocks/local.conf&quot;</span>

<span class="token assign-left variable">common_ciphers</span><span class="token operator">=</span><span class="token punctuation">(</span>
chacha20-ietf-poly1305
xchacha20-ietf-poly1305
aes-256-gcm
aes-192-gcm
aes-128-gcm
<span class="token punctuation">)</span>

<span class="token function-name function">install_main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	check_sys
    install_prepare
    install_dependencies
	install_libtool
	install_mbedtls
	install_libsodium
	check_bbr_status
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		check_kernel_version
		<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
			enable_bbr
		<span class="token keyword">fi</span>
	<span class="token keyword">fi</span>
	optimization_sys_config
    install_shadowsocks_libev
	install_completed_libev
    config_firewall
    install_cleanup
<span class="token punctuation">}</span>

<span class="token function-name function">getversion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">grep</span> <span class="token parameter variable">-oE</span> <span class="token string">&quot;[0-9.]+&quot;</span> /etc/redhat-release
<span class="token punctuation">}</span>

<span class="token function-name function">check_sys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/redhat-release <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
	<span class="token keyword">else</span> 
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;Only supported CentOS 7/8.&quot;</span>
		<span class="token builtin class-name">exit</span> <span class="token number">1</span>
	<span class="token keyword">fi</span>
	<span class="token builtin class-name">local</span> <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>getversion<span class="token variable">)</span></span>&quot;</span>
    <span class="token assign-left variable">sys_main_ver</span><span class="token operator">=</span><span class="token variable">${version<span class="token operator">%%</span>.*}</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$sys_main_ver</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">'7'</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$sys_main_ver</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">'8'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;Only supports CentOS 7/8.&quot;</span>
		<span class="token builtin class-name">exit</span> <span class="token number">1</span>
	<span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">check_kernel_version</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token assign-left variable">kernel_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'.'</span> <span class="token string">'{print $1}'</span><span class="token variable">)</span></span>
	<span class="token assign-left variable">kernel_main_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'.'</span> <span class="token string">'{print $2}'</span><span class="token variable">)</span></span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$kernel_version</span> <span class="token parameter variable">-eq</span> <span class="token number">4</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">$kernel_main_version</span> <span class="token parameter variable">-lt</span> <span class="token number">9</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;Google BBR only supports kernel version 4.9 or higher&quot;</span>
		<span class="token builtin class-name">return</span> <span class="token number">0</span>
	<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$kernel_version</span> <span class="token parameter variable">-lt</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;Google BBR only supports kernel version 4.9 or higher&quot;</span>
		<span class="token builtin class-name">return</span> <span class="token number">0</span>
	<span class="token keyword">fi</span>
	<span class="token builtin class-name">return</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token function-name function">get_libev_ver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token assign-left variable">libev_ver</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> --no-check-certificate -qO- https://api.github.com/repos/shadowsocks/shadowsocks-libev/releases/latest <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'tag_name'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token punctuation">\</span>&quot; <span class="token parameter variable">-f4</span><span class="token variable">)</span></span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token variable">${libev_ver}</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] Get shadowsocks-libev latest version failed&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token function-name function">download_shadowsocks_libev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">cd</span> <span class="token variable">${cur_dir}</span>

    get_libev_ver
    <span class="token assign-left variable">shadowsocks_libev_file</span><span class="token operator">=</span><span class="token string">&quot;shadowsocks-libev-<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $<span class="token punctuation">{</span>libev_ver<span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/^[a-zA-Z]//g'</span><span class="token variable">)</span></span>&quot;</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">shadowsocks_libev_url</span><span class="token operator">=</span><span class="token string">&quot;https://github.com/shadowsocks/shadowsocks-libev/releases/download/<span class="token variable">${libev_ver}</span>/<span class="token variable">${shadowsocks_libev_file}</span>.tar.gz&quot;</span>

    download <span class="token string">&quot;<span class="token variable">${shadowsocks_libev_file}</span>.tar.gz&quot;</span> <span class="token string">&quot;<span class="token variable">${shadowsocks_libev_url}</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">download</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">filename</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> $1<span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">${1}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${filename}</span> [found]&quot;</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${filename}</span> not found, download now...&quot;</span>
        <span class="token function">wget</span> --no-check-certificate <span class="token parameter variable">-c</span> <span class="token parameter variable">-t3</span> <span class="token parameter variable">-T60</span> <span class="token parameter variable">-O</span> <span class="token variable">${1}</span> <span class="token variable">${2}</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] Download <span class="token variable">${filename}</span> failed.&quot;</span>
            <span class="token builtin class-name">exit</span> <span class="token number">1</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
<span class="token function-name function">install_libtool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /usr/bin/libtool <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /usr/local/bin/libtool <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">cd</span> <span class="token variable">${cur_dir}</span>
        download <span class="token string">&quot;<span class="token variable">${libtool_file}</span>.tar.gz&quot;</span> <span class="token string">&quot;<span class="token variable">${libtool_url}</span>&quot;</span>
        <span class="token function">tar</span> <span class="token parameter variable">-zxf</span> <span class="token variable">${libtool_file}</span>.tar.gz
        <span class="token builtin class-name">cd</span> <span class="token variable">${libtool_file}</span>
        ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> ldconfig
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] <span class="token variable">${libtool_file}</span> install failed.&quot;</span>
            install_cleanup
            <span class="token builtin class-name">exit</span> <span class="token number">1</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${green}</span>Info<span class="token variable">${plain}</span>] libtool already installed.&quot;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
<span class="token function-name function">install_libsodium</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /usr/lib/libsodium.a <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">cd</span> <span class="token variable">${cur_dir}</span>
        download <span class="token string">&quot;<span class="token variable">${libsodium_file}</span>.tar.gz&quot;</span> <span class="token string">&quot;<span class="token variable">${libsodium_url}</span>&quot;</span>
        <span class="token function">tar</span> <span class="token parameter variable">-zxf</span> <span class="token variable">${libsodium_file}</span>.tar.gz
        <span class="token builtin class-name">cd</span> libsodium-stable
        ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> ldconfig
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] <span class="token variable">${libsodium_file}</span> install failed.&quot;</span>
            install_cleanup
            <span class="token builtin class-name">exit</span> <span class="token number">1</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${green}</span>Info<span class="token variable">${plain}</span>] libsodium already installed.&quot;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_mbedtls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /usr/lib/libmbedtls.a <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /usr/bin/mbedtls_hello <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /usr/local/bin/mbedtls_hello <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">cd</span> <span class="token variable">${cur_dir}</span>
        download <span class="token string">&quot;<span class="token variable">${mbedtls_file}</span>-gpl.tgz&quot;</span> <span class="token string">&quot;<span class="token variable">${mbedtls_url}</span>&quot;</span>
        <span class="token function">tar</span> <span class="token parameter variable">-xf</span> <span class="token variable">${mbedtls_file}</span>-gpl.tgz
        <span class="token builtin class-name">cd</span> <span class="token variable">${mbedtls_file}</span>
        <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span>/usr <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> ldconfig
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] <span class="token variable">${mbedtls_file}</span> install failed.&quot;</span>
            install_cleanup
            <span class="token builtin class-name">exit</span> <span class="token number">1</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${green}</span>Info<span class="token variable">${plain}</span>] mbedtls already installed.&quot;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_shadowsocks_libev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	download_shadowsocks_libev
    <span class="token builtin class-name">cd</span> <span class="token variable">${cur_dir}</span>
    <span class="token function">tar</span> <span class="token parameter variable">-zxf</span> <span class="token variable">${shadowsocks_libev_file}</span>.tar.gz
    <span class="token builtin class-name">cd</span> <span class="token variable">${shadowsocks_libev_file}</span>
    ./configure --disable-documentation <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		config_shadowsocks_libev
        systemctl start shadowsocks-libev
		systemctl <span class="token builtin class-name">enable</span> shadowsocks-libev
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] shadowsocks-libev install failed.&quot;</span>
        install_cleanup
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_completed_libev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">clear</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;Congratulations, shadowsocks-libev server install completed!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;Your Server IP        : <span class="token variable">${red}</span> <span class="token variable"><span class="token variable">$(</span>get_ip<span class="token variable">)</span></span> <span class="token variable">${plain}</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;Your Server Port      : <span class="token variable">${red}</span> <span class="token variable">${shadowsocksport}</span> <span class="token variable">${plain}</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;Your Password         : <span class="token variable">${red}</span> <span class="token variable">${shadowsockspwd}</span> <span class="token variable">${plain}</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;Your Encryption Method: <span class="token variable">${red}</span> <span class="token variable">${shadowsockscipher}</span> <span class="token variable">${plain}</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">cd</span> <span class="token variable">${cur_dir}</span>
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> libsodium-stable <span class="token variable">${libsodium_file}</span>.tar.gz
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${mbedtls_file}</span> <span class="token variable">${mbedtls_file}</span>-gpl.tgz
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${libtool_file}</span> <span class="token variable">${libtool_file}</span>.tar.gz
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${shadowsocks_libev_file}</span> <span class="token variable">${shadowsocks_libev_file}</span>.tar.gz
<span class="token punctuation">}</span>

<span class="token function-name function">check_kernel_headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-q</span> headers-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">return</span> <span class="token number">0</span>
	<span class="token keyword">else</span>
		<span class="token builtin class-name">return</span> <span class="token number">1</span>
	<span class="token keyword">fi</span>
<span class="token punctuation">}</span>


<span class="token function-name function">config_shadowsocks_libev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> $<span class="token punctuation">{</span>shadowsocks_libev_config<span class="token punctuation">}</span><span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> $<span class="token punctuation">{</span>shadowsocks_libev_config<span class="token punctuation">}</span><span class="token variable">)</span></span>
	<span class="token keyword">fi</span>

	<span class="token function">cat</span> <span class="token operator">&gt;</span> <span class="token variable">${shadowsocks_libev_config}</span><span class="token operator">&lt;&lt;-</span>EOF
	<span class="token punctuation">{</span>
		<span class="token string">&quot;server&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0.0.0.0&quot;</span>,
		<span class="token string">&quot;server_port&quot;</span><span class="token builtin class-name">:</span><span class="token variable">${shadowsocksport}</span>,
		<span class="token string">&quot;password&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">${shadowsockspwd}</span>&quot;</span>,
		<span class="token string">&quot;timeout&quot;</span>:600,
		<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">${shadowsockscipher}</span>&quot;</span>,
		<span class="token string">&quot;fast_open&quot;</span>:true,
		<span class="token string">&quot;mode&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;tcp_only&quot;</span>
	<span class="token punctuation">}</span>
	EOF
	
	<span class="token function">cat</span> <span class="token operator">&gt;</span> <span class="token variable">${shadowsocks_libev_service}</span><span class="token operator">&lt;&lt;-</span>EOF
	<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
	<span class="token assign-left variable">Description</span><span class="token operator">=</span>shadowsocks-libev server
	<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target

	<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
	<span class="token assign-left variable">Type</span><span class="token operator">=</span>simple
	<span class="token assign-left variable">ExecStartPre</span><span class="token operator">=</span>/bin/sh <span class="token parameter variable">-c</span> <span class="token string">'ulimit -n 51200'</span>
	<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/bin/ss-server <span class="token parameter variable">-c</span> /etc/shadowsocks-libev/config.json
	<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-abort

	<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
	<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
	EOF
<span class="token punctuation">}</span>


<span class="token function-name function">error_detect_depends</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">command</span><span class="token operator">=</span><span class="token variable">$1</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">depend</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${command}</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $4}'</span><span class="token variable">`</span></span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${green}</span>Info<span class="token variable">${plain}</span>] Starting to install package <span class="token variable">${depend}</span>&quot;</span>
    <span class="token variable">${command}</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] Failed to install <span class="token variable">${red}</span><span class="token variable">${depend}</span><span class="token variable">${plain}</span>&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_dependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token builtin class-name">local</span> <span class="token assign-left variable">gcc_path</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> gcc<span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${gcc_path}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		error_detect_depends <span class="token string">&quot;yum -y install gcc&quot;</span>
	<span class="token keyword">fi</span>
    <span class="token assign-left variable">yum_depends</span><span class="token operator">=</span><span class="token punctuation">(</span>
		gettext autoconf automake <span class="token function">make</span> pcre-devel asciidoc xmlto c-ares-devel libev-devel <span class="token function">wget</span> <span class="token function">tar</span> m4 perl
	<span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token for-or-select variable">depend</span> <span class="token keyword">in</span> <span class="token variable">${yum_depends<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
		error_detect_depends <span class="token string">&quot;yum -y install <span class="token variable">${depend}</span>&quot;</span>
	<span class="token keyword">done</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$sys_main_ver</span>&quot;</span> <span class="token operator">==</span> <span class="token string">'8'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		install_python2
	<span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_python2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /usr/lib64/libpython2.7.so.1.0 <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		error_detect_depends <span class="token string">&quot;yum -y install python2&quot;</span>
	<span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">config_firewall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    systemctl status firewalld <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token assign-left variable">default_zone</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>firewall-cmd --get-default-zone<span class="token variable">)</span></span>
		firewall-cmd <span class="token parameter variable">--permanent</span> <span class="token parameter variable">--zone</span><span class="token operator">=</span><span class="token variable">${default_zone}</span> --add-port<span class="token operator">=</span><span class="token variable">${shadowsocksport}</span>/tcp
		firewall-cmd <span class="token parameter variable">--permanent</span> <span class="token parameter variable">--zone</span><span class="token operator">=</span><span class="token variable">${default_zone}</span> --add-port<span class="token operator">=</span><span class="token variable">${shadowsocksport}</span>/udp
		firewall-cmd <span class="token parameter variable">--reload</span>
	<span class="token keyword">else</span>
		<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${yellow}</span>Warning<span class="token variable">${plain}</span>] firewalld looks like not running or not installed, please enable port <span class="token variable">${shadowsocksport}</span> manually if necessary.&quot;</span>
	<span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_prepare_port</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token boolean">true</span>
    <span class="token keyword">do</span>
    <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">shuf</span> <span class="token parameter variable">-i</span> <span class="token number">9000</span>-19999 <span class="token parameter variable">-n</span> <span class="token number">1</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;Please enter a port for shadowsocks-libev [1-65535]&quot;</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;(Default port: <span class="token variable">${dport}</span>):&quot;</span> shadowsocksport
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">${shadowsocksport}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">shadowsocksport</span><span class="token operator">=</span><span class="token variable">${dport}</span>
    <span class="token function">expr</span> <span class="token variable">${shadowsocksport}</span> + <span class="token number">1</span> <span class="token operator">&amp;&gt;</span>/dev/null
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">${shadowsocksport}</span> <span class="token parameter variable">-ge</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">${shadowsocksport}</span> <span class="token parameter variable">-le</span> <span class="token number">65535</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">${shadowsocksport<span class="token operator">:</span>0<span class="token operator">:</span>1}</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;port = <span class="token variable">${shadowsocksport}</span>&quot;</span>
            <span class="token builtin class-name">echo</span>
            <span class="token builtin class-name">break</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] Please enter a correct number [1-65535]&quot;</span>
    <span class="token keyword">done</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_prepare_password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token builtin class-name">local</span> <span class="token assign-left variable">mkpasswd_path</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> mkpasswd<span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${mkpasswd_path}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		error_detect_depends <span class="token string">&quot;yum -y install expect&quot;</span>
	<span class="token keyword">fi</span>
	<span class="token assign-left variable">radompassword</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mkpasswd <span class="token parameter variable">-l</span> <span class="token number">18</span> <span class="token parameter variable">-d</span> <span class="token number">2</span> <span class="token parameter variable">-s</span> <span class="token number">0</span><span class="token variable">)</span></span>

    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Please enter password for shadowsocks-libev&quot;</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;(Default password: <span class="token variable">${radompassword}</span>):&quot;</span> shadowsockspwd
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">${shadowsockspwd}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">shadowsockspwd</span><span class="token operator">=</span><span class="token variable">${radompassword}</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;password = <span class="token variable">${shadowsockspwd}</span>&quot;</span>
    <span class="token builtin class-name">echo</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_prepare_cipher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token boolean">true</span>
    <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;Please select stream cipher for shadowsocks-libev:&quot;</span>

	<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>${#common_ciphers[@]}<span class="token punctuation">;</span>i<span class="token operator">++</span> <span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
		<span class="token assign-left variable">hint</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${common_ciphers<span class="token punctuation">[</span>$i-1<span class="token punctuation">]</span>}</span>&quot;</span>
		<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable">${green}</span><span class="token variable">${i}</span><span class="token variable">${plain}</span>) <span class="token variable">${hint}</span>&quot;</span>
	<span class="token keyword">done</span>
	<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Which cipher you'd select(Default: <span class="token variable">${common_ciphers<span class="token punctuation">[</span>0<span class="token punctuation">]</span>}</span>):&quot;</span> pick
	<span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$pick</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">pick</span><span class="token operator">=</span><span class="token number">1</span>
	<span class="token function">expr</span> <span class="token variable">${pick}</span> + <span class="token number">1</span> <span class="token operator">&amp;&gt;</span>/dev/null
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] Please enter a number&quot;</span>
		<span class="token builtin class-name">continue</span>
	<span class="token keyword">fi</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$pick</span>&quot;</span> <span class="token parameter variable">-lt</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token string">&quot;<span class="token variable">$pick</span>&quot;</span> <span class="token parameter variable">-gt</span> <span class="token variable">${<span class="token operator">#</span>common_ciphers<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;[<span class="token variable">${red}</span>Error<span class="token variable">${plain}</span>] Please enter a number between 1 and <span class="token variable">${<span class="token operator">#</span>common_ciphers<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span>
		<span class="token builtin class-name">continue</span>
	<span class="token keyword">fi</span>
	<span class="token assign-left variable">shadowsockscipher</span><span class="token operator">=</span><span class="token variable">${common_ciphers<span class="token punctuation">[</span>$pick-1<span class="token punctuation">]</span>}</span>
    
   

    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;cipher = <span class="token variable">${shadowsockscipher}</span>&quot;</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">break</span>
    <span class="token keyword">done</span>
<span class="token punctuation">}</span>

<span class="token function-name function">check_bbr_status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">param</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>lsmod <span class="token operator">|</span> <span class="token function">grep</span> bbr <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1}'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${param}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;tcp_bbr&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;[<span class="token variable">${green}</span>Info<span class="token variable">${plain}</span>] Your Google BBR enabled&quot;</span>
        <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">return</span> <span class="token number">0</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">enable_bbr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	modprobe tcp_bbr
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;tcp_bbr&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/modules-load.d/modules.conf
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;net.core.default_qdisc = fq&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;net.ipv4.tcp_congestion_control = bbr&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf
    <span class="token function">sysctl</span> <span class="token parameter variable">-p</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;[<span class="token variable">${green}</span>Info<span class="token variable">${plain}</span>] Google BBR enabled&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">optimization_sys_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token builtin class-name">cd</span> <span class="token variable">${cur_dir}</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> /etc/sysctl.d/local.conf <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		download <span class="token string">&quot;<span class="token variable">${localconf_file}</span>.conf&quot;</span> <span class="token string">&quot;<span class="token variable">${localconf_url}</span>&quot;</span>
		<span class="token function">mv</span> <span class="token variable">${localconf_file}</span>.conf /etc/sysctl.d/local.conf
		<span class="token function">sysctl</span> <span class="token parameter variable">--system</span>	
	<span class="token keyword">fi</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> <span class="token string">&quot;* soft nofile&quot;</span> /etc/security/limits.conf<span class="token variable">)</span></span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;* soft nofile 51200&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
	<span class="token keyword">fi</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> <span class="token string">&quot;* hard nofile&quot;</span> /etc/security/limits.conf<span class="token variable">)</span></span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;* hard nofile 51200&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf
	<span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">get_ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span> <span class="token function">ip</span> addr <span class="token operator">|</span> <span class="token function">egrep</span> <span class="token parameter variable">-o</span> <span class="token string">'[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'</span> <span class="token operator">|</span> <span class="token function">egrep</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;^192\.168|^172\.1[6-9]\.|^172\.2[0-9]\.|^172\.3[0-2]\.|^10\.|^127\.|^255\.|^0\.&quot;</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token variable">)</span></span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token variable">${IP}</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span> <span class="token function">wget</span> -qO- <span class="token parameter variable">-t1</span> <span class="token parameter variable">-T2</span> api.24kplus.com/myip <span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token variable">${IP}</span>
<span class="token punctuation">}</span>

<span class="token function-name function">get_char</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token assign-left variable">SAVEDSTTY</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>stty <span class="token parameter variable">-g</span><span class="token variable">)</span></span>
    stty <span class="token parameter variable">-echo</span>
    stty cbreak
    <span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/tty <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null
    stty <span class="token parameter variable">-raw</span>
    stty <span class="token builtin class-name">echo</span>
    stty <span class="token variable">$SAVEDSTTY</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    install_prepare_password
    install_prepare_port
    install_prepare_cipher

    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Press any key to start...or Press Ctrl+C to cancel&quot;</span>
    <span class="token assign-left variable">char</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>get_char<span class="token variable">`</span></span>

<span class="token punctuation">}</span>

install_main
</code></pre></div></details> <p><a href="https://github.com/teddysun/shadowsocks_install/blob/master/shadowsocks-libev.sh" target="_blank" rel="noopener noreferrer">脚本地址Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.idcoffer.com/archives/1242" target="_blank" rel="noopener noreferrer">参考文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="一键安装-bbr-脚本"><a href="#一键安装-bbr-脚本" class="header-anchor">#</a> 一键安装 bbr 脚本</h3> <details class="custom-block details"><summary>See More</summary> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>
<span class="token comment">#</span>
<span class="token comment"># Auto install latest kernel for TCP BBR</span>
<span class="token comment">#</span>
<span class="token comment"># System Required:  CentOS 6+, Debian8+, Ubuntu16+</span>
<span class="token comment">#</span>
<span class="token comment"># Copyright (C) 2016-2021 Teddysun &lt;i@teddysun.com&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># URL: https://teddysun.com/489.html</span>
<span class="token comment">#</span>

<span class="token assign-left variable">cur_dir</span><span class="token operator">=</span><span class="token string">&quot;$(cd -P -- &quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">pwd</span> -P<span class="token punctuation">)</span><span class="token string">&quot;

_red() {
    printf '<span class="token entity" title="\033">\033</span>[1;31;31m%b<span class="token entity" title="\033">\033</span>[0m' &quot;</span><span class="token variable">$1</span><span class="token string">&quot;
}

_green() {
    printf '<span class="token entity" title="\033">\033</span>[1;31;32m%b<span class="token entity" title="\033">\033</span>[0m' &quot;</span><span class="token variable">$1</span><span class="token string">&quot;
}

_yellow() {
    printf '<span class="token entity" title="\033">\033</span>[1;31;33m%b<span class="token entity" title="\033">\033</span>[0m' &quot;</span><span class="token variable">$1</span><span class="token string">&quot;
}

_info() {
    _green &quot;</span><span class="token punctuation">[</span>Info<span class="token punctuation">]</span> <span class="token string">&quot;
    printf -- &quot;</span>%s<span class="token string">&quot; &quot;</span><span class="token variable">$1</span><span class="token string">&quot;
    printf &quot;</span><span class="token punctuation">\</span>n<span class="token string">&quot;
}

_warn() {
    _yellow &quot;</span><span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> <span class="token string">&quot;
    printf -- &quot;</span>%s<span class="token string">&quot; &quot;</span><span class="token variable">$1</span><span class="token string">&quot;
    printf &quot;</span><span class="token punctuation">\</span>n<span class="token string">&quot;
}

_error() {
    _red &quot;</span><span class="token punctuation">[</span>Error<span class="token punctuation">]</span> <span class="token string">&quot;
    printf -- &quot;</span>%s<span class="token string">&quot; &quot;</span><span class="token variable">$1</span><span class="token string">&quot;
    printf &quot;</span><span class="token punctuation">\</span>n<span class="token string">&quot;
    exit 1
}

_exists() {
    local cmd=&quot;</span><span class="token variable">$1</span><span class="token string">&quot;
    if eval type type &gt; /dev/null 2&gt;&amp;1; then
        eval type &quot;</span><span class="token variable">$cmd</span><span class="token string">&quot; &gt; /dev/null 2&gt;&amp;1
    elif command &gt; /dev/null 2&gt;&amp;1; then
        command -v &quot;</span><span class="token variable">$cmd</span><span class="token string">&quot; &gt; /dev/null 2&gt;&amp;1
    else
        which &quot;</span><span class="token variable">$cmd</span><span class="token string">&quot; &gt; /dev/null 2&gt;&amp;1
    fi
    local rt=<span class="token variable">$?</span>
    return <span class="token variable">${rt}</span>
}

_os() {
    local os=&quot;</span>&quot;
    <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;/etc/debian_version&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">source</span> /etc/os-release <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">os</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${ID}</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">printf</span> -- <span class="token string">&quot;%s&quot;</span> <span class="token string">&quot;<span class="token variable">${os}</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;/etc/redhat-release&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">os</span><span class="token operator">=</span><span class="token string">&quot;centos&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">printf</span> -- <span class="token string">&quot;%s&quot;</span> <span class="token string">&quot;<span class="token variable">${os}</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token function-name function">_os_full</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/redhat-release <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">awk</span> <span class="token string">'{print ($1,$3~/^[0-9]/?$3:$4)}'</span> /etc/redhat-release <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/os-release <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">awk</span> -F<span class="token string">'[= &quot;]'</span> <span class="token string">'/PRETTY_NAME/{print $3,$4,$5}'</span> /etc/os-release <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/lsb-release <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">awk</span> -F<span class="token string">'[=&quot;]+'</span> <span class="token string">'/DESCRIPTION/{print $2}'</span> /etc/lsb-release <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token function-name function">_os_ver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">main_ver</span><span class="token operator">=</span><span class="token string">&quot;$( echo <span class="token variable"><span class="token variable">$(</span>_os_full<span class="token variable">)</span></span> | grep -oE  &quot;</span><span class="token punctuation">[</span><span class="token number">0</span>-9.<span class="token punctuation">]</span>+<span class="token string">&quot;)&quot;</span>
    <span class="token builtin class-name">printf</span> -- <span class="token string">&quot;%s&quot;</span> <span class="token string">&quot;<span class="token variable">${main_ver<span class="token operator">%%</span>.*}</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">_error_detect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">cmd</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
    _info <span class="token string">&quot;<span class="token variable">${cmd}</span>&quot;</span>
    <span class="token builtin class-name">eval</span> <span class="token variable">${cmd}</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        _error <span class="token string">&quot;Execution command (<span class="token variable">${cmd}</span>) failed, please check it and try again.&quot;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">_is_digit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">input</span><span class="token operator">=</span><span class="token variable">${1}</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$input</span>&quot;</span> <span class="token operator">=~</span> ^<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>+$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">return</span> <span class="token number">0</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">_is_64bit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span>getconf WORD_BIT<span class="token variable">)</span></span> <span class="token operator">=</span> <span class="token string">'32'</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span>getconf LONG_BIT<span class="token variable">)</span></span> <span class="token operator">=</span> <span class="token string">'64'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">return</span> <span class="token number">0</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">_version_ge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">test</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">&quot; &quot;</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-rV</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span><span class="token variable">)</span></span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">get_valid_valname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token variable">${1}</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">new_val</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">eval</span> <span class="token builtin class-name">echo</span> $val <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/[-.]/_/g'</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token variable">${new_val}</span>
<span class="token punctuation">}</span>

<span class="token function-name function">get_hint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token variable">${1}</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">new_val</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>get_valid_valname $val<span class="token variable">)</span></span>
    <span class="token builtin class-name">eval</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$hint_</span><span class="token variable">${new_val}</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">#Display Memu</span>
<span class="token function-name function">display_menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">soft</span><span class="token operator">=</span><span class="token variable">${1}</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">default</span><span class="token operator">=</span><span class="token variable">${2}</span>
    <span class="token builtin class-name">eval</span> <span class="token builtin class-name">local</span> <span class="token assign-left variable">arr</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token variable">${${soft}</span>_arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">local</span> default_prompt
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$default</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$default</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;last&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token assign-left variable">default</span><span class="token operator">=</span><span class="token variable">${<span class="token operator">#</span>arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
        <span class="token keyword">fi</span>
        <span class="token assign-left variable">default_prompt</span><span class="token operator">=</span><span class="token string">&quot;(default <span class="token variable">${arr<span class="token punctuation">[</span>$default-1<span class="token punctuation">]</span>}</span>)&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">local</span> pick
    <span class="token builtin class-name">local</span> hint
    <span class="token builtin class-name">local</span> vname
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">prompt</span><span class="token operator">=</span><span class="token string">&quot;which <span class="token variable">${soft}</span> you'd select <span class="token variable">${default_prompt}</span>: &quot;</span>

    <span class="token keyword">while</span> <span class="token builtin class-name">:</span>
    <span class="token keyword">do</span>
        <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>------------ <span class="token variable">${soft}</span> setting ------------<span class="token entity" title="\n">\n</span>&quot;</span>
        <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>${#arr[@]}<span class="token punctuation">;</span>i<span class="token operator">++</span> <span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
            <span class="token assign-left variable">vname</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>get_valid_valname $<span class="token punctuation">{</span>arr<span class="token punctuation">[</span>$i-1<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token variable">)</span></span>&quot;</span>
            <span class="token assign-left variable">hint</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>get_hint $vname<span class="token variable">)</span></span>&quot;</span>
            <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$hint</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">hint</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${arr<span class="token punctuation">[</span>$i-1<span class="token punctuation">]</span>}</span>&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable">${green}</span><span class="token variable">${i}</span><span class="token variable">${plain}</span>) <span class="token variable">$hint</span>&quot;</span>
        <span class="token keyword">done</span>
        <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;<span class="token variable">${prompt}</span>&quot;</span> pick
        <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$pick</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;<span class="token variable">$default</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token assign-left variable">pick</span><span class="token operator">=</span><span class="token variable">${default}</span>
            <span class="token builtin class-name">break</span>
        <span class="token keyword">fi</span>

        <span class="token keyword">if</span> <span class="token operator">!</span> _is_digit <span class="token string">&quot;<span class="token variable">$pick</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token assign-left variable">prompt</span><span class="token operator">=</span><span class="token string">&quot;Input error, please input a number&quot;</span>
            <span class="token builtin class-name">continue</span>
        <span class="token keyword">fi</span>

        <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$pick</span>&quot;</span> <span class="token parameter variable">-lt</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token string">&quot;<span class="token variable">$pick</span>&quot;</span> <span class="token parameter variable">-gt</span> <span class="token variable">${<span class="token operator">#</span>arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token assign-left variable">prompt</span><span class="token operator">=</span><span class="token string">&quot;Input error, please input a number between 1 and <span class="token variable">${<span class="token operator">#</span>arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>: &quot;</span>
            <span class="token builtin class-name">continue</span>
        <span class="token keyword">fi</span>

        <span class="token builtin class-name">break</span>
    <span class="token keyword">done</span>

    <span class="token builtin class-name">eval</span> <span class="token variable">${soft}</span><span class="token operator">=</span><span class="token variable">${arr<span class="token punctuation">[</span>$pick-1<span class="token punctuation">]</span>}</span>
    <span class="token assign-left variable">vname</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>get_valid_valname $<span class="token punctuation">{</span>arr<span class="token punctuation">[</span>$pick-1<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token variable">)</span></span>&quot;</span>
    <span class="token assign-left variable">hint</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>get_hint $vname<span class="token variable">)</span></span>&quot;</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$hint</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">hint</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${arr<span class="token punctuation">[</span>$pick-1<span class="token punctuation">]</span>}</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>your selection: <span class="token variable">$hint</span><span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">get_latest_version</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token assign-left variable">latest_version</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- https://kernel.ubuntu.com/~kernel-ppa/mainline/ <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'\&quot;v'</span> <span class="token string">'/v[4-9]./{print $2}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d/ <span class="token parameter variable">-f1</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> - <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-V</span><span class="token variable">)</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">[</span> <span class="token variable">${<span class="token operator">#</span>latest_version<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error <span class="token string">&quot;Get latest kernel version failed.&quot;</span>
    <span class="token assign-left variable">kernel_arr</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${latest_version<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> _version_ge <span class="token variable">$i</span> <span class="token number">5.9</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token assign-left variable">kernel_arr</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">done</span>
    display_menu kernel last
    <span class="token keyword">if</span> _is_64bit<span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">deb_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- https://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>kernel<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'\&quot;&gt;'</span> <span class="token string">'/amd64.deb/{print $2}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> <span class="token parameter variable">-f1</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
        <span class="token assign-left variable">deb_kernel_url</span><span class="token operator">=</span><span class="token string">&quot;https://kernel.ubuntu.com/~kernel-ppa/mainline/v<span class="token variable">${kernel}</span>/<span class="token variable">${deb_name}</span>&quot;</span>
        <span class="token assign-left variable">deb_kernel_name</span><span class="token operator">=</span><span class="token string">&quot;linux-image-<span class="token variable">${kernel}</span>-amd64.deb&quot;</span>
        <span class="token assign-left variable">modules_deb_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- https://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>kernel<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-modules&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'\&quot;&gt;'</span> <span class="token string">'/amd64.deb/{print $2}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> <span class="token parameter variable">-f1</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
        <span class="token assign-left variable">deb_kernel_modules_url</span><span class="token operator">=</span><span class="token string">&quot;https://kernel.ubuntu.com/~kernel-ppa/mainline/v<span class="token variable">${kernel}</span>/<span class="token variable">${modules_deb_name}</span>&quot;</span>
        <span class="token assign-left variable">deb_kernel_modules_name</span><span class="token operator">=</span><span class="token string">&quot;linux-modules-<span class="token variable">${kernel}</span>-amd64.deb&quot;</span>
    <span class="token keyword">else</span>
        <span class="token assign-left variable">deb_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- https://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>kernel<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'\&quot;&gt;'</span> <span class="token string">'/i386.deb/{print $2}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> <span class="token parameter variable">-f1</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
        <span class="token assign-left variable">deb_kernel_url</span><span class="token operator">=</span><span class="token string">&quot;https://kernel.ubuntu.com/~kernel-ppa/mainline/v<span class="token variable">${kernel}</span>/<span class="token variable">${deb_name}</span>&quot;</span>
        <span class="token assign-left variable">deb_kernel_name</span><span class="token operator">=</span><span class="token string">&quot;linux-image-<span class="token variable">${kernel}</span>-i386.deb&quot;</span>
        <span class="token assign-left variable">modules_deb_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- https://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>kernel<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-modules&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'\&quot;&gt;'</span> <span class="token string">'/i386.deb/{print $2}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> <span class="token parameter variable">-f1</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
        <span class="token assign-left variable">deb_kernel_modules_url</span><span class="token operator">=</span><span class="token string">&quot;https://kernel.ubuntu.com/~kernel-ppa/mainline/v<span class="token variable">${kernel}</span>/<span class="token variable">${modules_deb_name}</span>&quot;</span>
        <span class="token assign-left variable">deb_kernel_modules_name</span><span class="token operator">=</span><span class="token string">&quot;linux-modules-<span class="token variable">${kernel}</span>-i386.deb&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">${deb_name}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error <span class="token string">&quot;Getting Linux kernel binary package name failed, maybe kernel build failed. Please choose other one and try again.&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">get_char</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token assign-left variable">SAVEDSTTY</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>stty <span class="token parameter variable">-g</span><span class="token variable">`</span></span>
    stty <span class="token parameter variable">-echo</span>
    stty cbreak
    <span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/tty <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null
    stty <span class="token parameter variable">-raw</span>
    stty <span class="token builtin class-name">echo</span>
    stty <span class="token variable">$SAVEDSTTY</span>
<span class="token punctuation">}</span>

<span class="token function-name function">check_bbr_status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">param</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sysctl</span> net.ipv4.tcp_congestion_control <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $3}'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> x<span class="token string">&quot;<span class="token variable">${param}</span>&quot;</span> <span class="token operator">==</span> x<span class="token string">&quot;bbr&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">return</span> <span class="token number">0</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">check_kernel_version</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">kernel_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span> <span class="token function">cut</span> -d- <span class="token parameter variable">-f1</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> _version_ge <span class="token variable">${kernel_version}</span> <span class="token number">4.9</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">return</span> <span class="token number">0</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">return</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Check OS version</span>
<span class="token function-name function">check_os</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> _exists <span class="token string">&quot;virt-what&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">virt</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>virt-what<span class="token variable">)</span></span>&quot;</span>
    <span class="token keyword">elif</span> _exists <span class="token string">&quot;systemd-detect-virt&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">virt</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>systemd-detect-virt<span class="token variable">)</span></span>&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">${virt}</span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;<span class="token variable">${virt}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;lxc&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        _error <span class="token string">&quot;Virtualization method is LXC, which is not supported.&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">${virt}</span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;<span class="token variable">${virt}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;openvz&quot;</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;/proc/vz&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        _error <span class="token string">&quot;Virtualization method is OpenVZ, which is not supported.&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os<span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error <span class="token string">&quot;Not supported OS&quot;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os<span class="token variable">)</span></span>&quot;</span> <span class="token keyword">in</span>
        ubuntu<span class="token punctuation">)</span>
            <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-lt</span> <span class="token number">16</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error <span class="token string">&quot;Not supported OS, please change to Ubuntu 16+ and try again.&quot;</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        debian<span class="token punctuation">)</span>
            <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-lt</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>  _error <span class="token string">&quot;Not supported OS, please change to Debian 8+ and try again.&quot;</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        centos<span class="token punctuation">)</span>
            <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-lt</span> <span class="token number">6</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>  _error <span class="token string">&quot;Not supported OS, please change to CentOS 6+ and try again.&quot;</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span>
            _error <span class="token string">&quot;Not supported OS&quot;</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
<span class="token punctuation">}</span>

<span class="token function-name function">sysctl_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'/net.core.default_qdisc/d'</span> /etc/sysctl.conf
    <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'/net.ipv4.tcp_congestion_control/d'</span> /etc/sysctl.conf
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;net.core.default_qdisc = fq&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;net.ipv4.tcp_congestion_control = bbr&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf
    <span class="token function">sysctl</span> <span class="token parameter variable">-p</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_kernel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os<span class="token variable">)</span></span>&quot;</span> <span class="token keyword">in</span>
        centos<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                <span class="token keyword">if</span> <span class="token operator">!</span> _exists <span class="token string">&quot;yum-config-manager&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                    _error_detect <span class="token string">&quot;yum install -y yum-utils&quot;</span>
                <span class="token keyword">fi</span>
                <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-eq</span> <span class="token number">6</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                    _error_detect <span class="token string">&quot;rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org&quot;</span>
                    <span class="token assign-left variable">rpm_kernel_url</span><span class="token operator">=</span><span class="token string">&quot;https://dl.lamp.sh/files/&quot;</span>
                    <span class="token keyword">if</span> _is_64bit<span class="token punctuation">;</span> <span class="token keyword">then</span>
                        <span class="token assign-left variable">rpm_kernel_name</span><span class="token operator">=</span><span class="token string">&quot;kernel-ml-4.18.20-1.el6.elrepo.x86_64.rpm&quot;</span>
                        <span class="token assign-left variable">rpm_kernel_devel_name</span><span class="token operator">=</span><span class="token string">&quot;kernel-ml-devel-4.18.20-1.el6.elrepo.x86_64.rpm&quot;</span>
                    <span class="token keyword">else</span>
                        <span class="token assign-left variable">rpm_kernel_name</span><span class="token operator">=</span><span class="token string">&quot;kernel-ml-4.18.20-1.el6.elrepo.i686.rpm&quot;</span>
                        <span class="token assign-left variable">rpm_kernel_devel_name</span><span class="token operator">=</span><span class="token string">&quot;kernel-ml-devel-4.18.20-1.el6.elrepo.i686.rpm&quot;</span>
                    <span class="token keyword">fi</span>
                    _error_detect <span class="token string">&quot;wget -c -t3 -T60 -O <span class="token variable">${rpm_kernel_name}</span> <span class="token variable">${rpm_kernel_url}</span><span class="token variable">${rpm_kernel_name}</span>&quot;</span>
                    _error_detect <span class="token string">&quot;wget -c -t3 -T60 -O <span class="token variable">${rpm_kernel_devel_name}</span> <span class="token variable">${rpm_kernel_url}</span><span class="token variable">${rpm_kernel_devel_name}</span>&quot;</span>
                    <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;<span class="token variable">${rpm_kernel_name}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error_detect <span class="token string">&quot;rpm -ivh <span class="token variable">${rpm_kernel_name}</span>&quot;</span> <span class="token operator">||</span> _error <span class="token string">&quot;Download <span class="token variable">${rpm_kernel_name}</span> failed, please check it.&quot;</span>
                    <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;<span class="token variable">${rpm_kernel_devel_name}</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error_detect <span class="token string">&quot;rpm -ivh <span class="token variable">${rpm_kernel_devel_name}</span>&quot;</span> <span class="token operator">||</span> _error <span class="token string">&quot;Download <span class="token variable">${rpm_kernel_devel_name}</span> failed, please check it.&quot;</span>
                    <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable">${rpm_kernel_name}</span> <span class="token variable">${rpm_kernel_devel_name}</span>
                    <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;/boot/grub/grub.conf&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error <span class="token string">&quot;/boot/grub/grub.conf not found, please check it.&quot;</span>
                    <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/^default=.*/default=0/g'</span> /boot/grub/grub.conf
                <span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>_os_ver<span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-eq</span> <span class="token number">7</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                    _error_detect <span class="token string">&quot;yum -y install centos-release-xen-48&quot;</span>
                    <span class="token punctuation">[</span> x<span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>yum-config-manager centos-virt-xen-48 <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-w</span> enabled <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $3}'</span><span class="token variable">)</span></span>&quot;</span> <span class="token operator">!=</span> x<span class="token string">&quot;True&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error_detect <span class="token string">&quot;yum-config-manager --enable centos-virt-xen-48&quot;</span>
                    _error_detect <span class="token string">&quot;yum -y update kernel&quot;</span>
                    _error_detect <span class="token string">&quot;yum -y install kernel-devel&quot;</span>
                <span class="token keyword">fi</span>
            <span class="token keyword">fi</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        ubuntu<span class="token operator">|</span>debian<span class="token punctuation">)</span>
            _info <span class="token string">&quot;Getting latest kernel version...&quot;</span>
            get_latest_version
            <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">${modules_deb_name}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                _error_detect <span class="token string">&quot;wget -c -t3 -T60 -O <span class="token variable">${deb_kernel_modules_name}</span> <span class="token variable">${deb_kernel_modules_url}</span>&quot;</span>
            <span class="token keyword">fi</span>
            _error_detect <span class="token string">&quot;wget -c -t3 -T60 -O <span class="token variable">${deb_kernel_name}</span> <span class="token variable">${deb_kernel_url}</span>&quot;</span>
            _error_detect <span class="token string">&quot;dpkg -i <span class="token variable">${deb_kernel_modules_name}</span> <span class="token variable">${deb_kernel_name}</span>&quot;</span>
            <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable">${deb_kernel_modules_name}</span> <span class="token variable">${deb_kernel_name}</span>
            _error_detect <span class="token string">&quot;/usr/sbin/update-grub&quot;</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token comment"># do nothing</span>
    <span class="token keyword">esac</span>
<span class="token punctuation">}</span>

<span class="token function-name function">reboot_os</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span>
    _info <span class="token string">&quot;The system needs to reboot.&quot;</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Do you want to restart system? [y/n]&quot;</span> is_reboot
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">${is_reboot}</span> <span class="token operator">==</span> <span class="token string">&quot;y&quot;</span> <span class="token operator">||</span> <span class="token variable">${is_reboot}</span> <span class="token operator">==</span> <span class="token string">&quot;Y&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">reboot</span>
    <span class="token keyword">else</span>
        _info <span class="token string">&quot;Reboot has been canceled...&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">0</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">install_bbr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> check_bbr_status<span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span>
        _info <span class="token string">&quot;TCP BBR has already been enabled. nothing to do...&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">0</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> check_kernel_version<span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span>
        _info <span class="token string">&quot;The kernel version is greater than 4.9, directly setting TCP BBR...&quot;</span>
        sysctl_config
        _info <span class="token string">&quot;Setting TCP BBR completed...&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">0</span>
    <span class="token keyword">fi</span>
    check_os
    install_kernel
    sysctl_config
    reboot_os
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$EUID</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> _error <span class="token string">&quot;This script must be run as root&quot;</span>
<span class="token assign-left variable">opsy</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span> _os_full <span class="token variable">)</span></span>
<span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span> <span class="token function">uname</span> <span class="token parameter variable">-m</span> <span class="token variable">)</span></span>
<span class="token assign-left variable">lbit</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span> getconf LONG_BIT <span class="token variable">)</span></span>
<span class="token assign-left variable">kern</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span> <span class="token function">uname</span> <span class="token parameter variable">-r</span> <span class="token variable">)</span></span>

<span class="token function">clear</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;---------- System Information ----------&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; OS      : <span class="token variable">$opsy</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; Arch    : <span class="token variable">$arch</span> (<span class="token variable">$lbit</span> Bit)&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; Kernel  : <span class="token variable">$kern</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------------&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; Automatically enable TCP BBR script&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; URL: https://teddysun.com/489.html&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------------&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Press any key to start...or Press Ctrl+C to cancel&quot;</span>
<span class="token assign-left variable">char</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>get_char<span class="token variable">)</span></span>

install_bbr <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">tee</span> <span class="token variable">${cur_dir}</span>/install_bbr.log
</code></pre></div></details> <p><a href="https://github.com/teddysun/across/raw/master/bbr.sh" target="_blank" rel="noopener noreferrer">脚本地址Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <p><a href="https://blog.csdn.net/lizhengyu891231/article/details/103490899" target="_blank" rel="noopener noreferrer">CentOS7安装TCP BBR加速<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.24kplus.com/linux/210.html" target="_blank" rel="noopener noreferrer">升级/更新 Centos 7 内核<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/guide/Linux/sn/" class="prev">
          screen 命令
        </a></span> <span class="next"><a href="/guide/Linux/updateCore/">
          CentOs7 升级/更新内核
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/guide/Linux/ss/#安装" class="sidebar-link reco-side-安装" data-v-b57cc07c>安装</a></li><li class="level-3" data-v-b57cc07c><a href="/guide/Linux/ss/#安装说明" class="sidebar-link reco-side-安装说明" data-v-b57cc07c>安装说明</a></li><li class="level-2" data-v-b57cc07c><a href="/guide/Linux/ss/#vps-网络优化" class="sidebar-link reco-side-vps-网络优化" data-v-b57cc07c>vps 网络优化</a></li><li class="level-3" data-v-b57cc07c><a href="/guide/Linux/ss/#一、优化吞吐量" class="sidebar-link reco-side-一、优化吞吐量" data-v-b57cc07c>一、优化吞吐量</a></li><li class="level-3" data-v-b57cc07c><a href="/guide/Linux/ss/#二、开启tcp-fast-open" class="sidebar-link reco-side-二、开启tcp-fast-open" data-v-b57cc07c>二、开启TCP Fast Open</a></li><li class="level-3" data-v-b57cc07c><a href="/guide/Linux/ss/#三、开启-google-bbr" class="sidebar-link reco-side-三、开启-google-bbr" data-v-b57cc07c>三、开启 Google BBR</a></li><li class="level-2" data-v-b57cc07c><a href="/guide/Linux/ss/#客户端下载使用" class="sidebar-link reco-side-客户端下载使用" data-v-b57cc07c>客户端下载使用</a></li><li class="level-2" data-v-b57cc07c><a href="/guide/Linux/ss/#参考" class="sidebar-link reco-side-参考" data-v-b57cc07c>参考</a></li><li class="level-3" data-v-b57cc07c><a href="/guide/Linux/ss/#一键安装-ss-libev-脚本" class="sidebar-link reco-side-一键安装-ss-libev-脚本" data-v-b57cc07c>一键安装 ss-libev 脚本</a></li><li class="level-3" data-v-b57cc07c><a href="/guide/Linux/ss/#一键安装-bbr-脚本" class="sidebar-link reco-side-一键安装-bbr-脚本" data-v-b57cc07c>一键安装 bbr 脚本</a></li><li class="level-2" data-v-b57cc07c><a href="/guide/Linux/ss/#参考文章" class="sidebar-link reco-side-参考文章" data-v-b57cc07c>参考文章</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.5a23a2ab.js" defer></script><script src="/assets/js/7.4f4f69ac.js" defer></script><script src="/assets/js/2.890c3301.js" defer></script><script src="/assets/js/1.0e465a30.js" defer></script><script src="/assets/js/32.63b839d1.js" defer></script>
  </body>
</html>
